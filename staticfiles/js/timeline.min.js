!function(t){t.VCO={VERSION:"0.1",_originalL:t.VCO}}(this),VCO.debug=!0,VCO.Bind=function(t,e){return function(){return t.apply(e,arguments)}},trace=function(t){VCO.debug&&(window.console?console.log(t):"undefined"!=typeof jsTrace&&jsTrace.send(t))},VCO.Util={extend:function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=0,a=i.length;n<a;n++)for(var s in e=i[n]||{})e.hasOwnProperty(s)&&(t[s]=e[s]);return t},setOptions:function(t,e){t.options=VCO.Util.extend({},t.options,e),""===t.options.unique_id&&(t.options.unique_id=VCO.Util.unique_ID(6))},isEven:function(t){return t==parseFloat(t)?!(t%2):void 0},findArrayNumberByUniqueID:function(t,e,i,n){for(var a=n||0,s=0;s<e.length;s++)e[s].data[i]==t&&(a=s);return a},convertUnixTime:function(t){var e,i,n,a=[],s={ymd:"",time:"",time_array:[],date_array:[],full_array:[]};s.ymd=t.split(" ")[0],s.time=t.split(" ")[1],s.date_array=s.ymd.split("-"),s.time_array=s.time.split(":"),s.full_array=s.date_array.concat(s.time_array);for(var o=0;o<s.full_array.length;o++)a.push(parseInt(s.full_array[o]));return i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=(e=new Date(a[0],a[1],a[2],a[3],a[4],a[5])).getFullYear(),i[e.getMonth()]+", "+e.getDate()+" "+n},setData:function(t,e){t.data=VCO.Util.extend({},t.data,e),""===t.data.unique_id&&(t.data.unique_id=VCO.Util.unique_ID(6))},mergeData:function(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},stamp:function(){var e=0,i="_vco_id";return function(t){return t[i]=t[i]||++e,t[i]}}(),isArray:function(){if(Array.isArray)return Array.isArray;var e=Object.prototype.toString,i=e.call([]);return function(t){return e.call(t)===i}}(),getRandomNumber:function(t){return Math.floor(Math.random()*t)},unique_ID:function(t,e){function n(){return"abcdefghijklmnopqurstuvwxyz".substr(Math.floor(32*Math.random()),1)}function i(t){for(var e="",i=0;i<t;i++)e+=n();return e}return e?e+"-"+i(t):"vco-"+i(t)},htmlify:function(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"},linkify:function(t,e,i){function s(t,e,i){return i=i||"",e&&30<e.length&&(e=e.substring(0,30)+"…"),i+"<a class='vco-makelink' target='_blank' href='"+t+"' onclick='void(0)'>"+e+"</a>"}return t.replace(/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,function(t,e,i,n){if(0<i){var a=n[i-1];if('"'==a||"'"==a||"="==a)return t}return s(t,e)}).replace(/(^|[^\/>])(www\.[\S]+(\b|$))/gim,function(t,e,i,n,a){return s("http://"+i,i,e)}).replace(/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim,function(t,e,i,n){return s("mailto:"+e,e)})},unlinkify:function(t){return t?t=(t=t.replace(/<a\b[^>]*>/i,"")).replace(/<\/a>/i,""):t},getParamString:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},falseFn:function(){return!1},requestAnimFrame:function(){function a(t){window.setTimeout(t,1e3/60)}var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||a;return function(t,e,i,n){t=e?VCO.Util.bind(t,e):t,i&&s===a?t():s(t,n)}}(),bind:function(t,e){return function(){return t.apply(e,arguments)}},template:function(t,n){return t.replace(/\{ *([\w_]+) *\}/g,function(t,e){var i=n[e];if(!n.hasOwnProperty(e))throw new Error("No value provided for variable "+t);return i})},hexToRgb:function(t){VCO.Util.css_named_colors[t.toLowerCase()]&&(t=VCO.Util.css_named_colors[t.toLowerCase()]);t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},css_named_colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ratio:{square:function(t){var e={w:0,h:0};return t.w>t.h&&0<t.h?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/16*9):null!==t.h&&""!==t.h?Math.round(t.h/9*16):0},r4_3:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/4*3):null!==t.h&&""!==t.h?Math.round(t.h/3*4):void 0}},getObjectAttributeByIndex:function(t,e){if(void 0===t)return"";var i=0;for(var n in t){if(e===i)return t[n];i++}return""},getUrlVars:function(t){var e,i,n=[],a=t.toString();a.match("&#038;")?a=a.replace("&#038;","&"):a.match("&#38;")?a=a.replace("&#38;","&"):a.match("&amp;")&&(a=a.replace("&amp;","&")),i=a.slice(a.indexOf("?")+1).split("&");for(var s=0;s<i.length;s++)e=i[s].split("="),n.push(e[0]),n[e[0]]=e[1];return n},trim:function(t){return t&&"function"==typeof t.replace?t.replace(/^\s+|\s+$/g,""):""},slugify:function(t){t=(t=VCO.Util.trim(t)).toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",i=0,n=e.length;i<n;i++)t=t.replace(new RegExp(e.charAt(i),"g"),"aaaaaeeeeeiiiiooooouuuunc------".charAt(i));return t=(t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")).replace(/^([0-9])/,"_$1")},maxDepth:function(t){for(var e=[],i=0,n=0;n<t.length;n++){if(e.push(t[n]),1<e.length){for(var a=e[e.length-1],s=-1,o=0;o<e.length-1;o++)e[o][1]<a[0]&&(s=o);0<=s&&(e=e.slice(s+1))}e.length>i&&(i=e.length)}return i},pad:function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},findNextGreater:function(t,e,i){for(var n=0;n<t.length;n++)if(e<t[n])return t[n];return i||e},findNextLesser:function(t,e,i){for(var n=t.length-1;0<=n;n--)if(e>t[n])return t[n];return i||e},isEmptyObject:function(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);for(var n=0;n<e.length;n++){var a=e[n];if(null!=t[a]&&"string"!=typeof t[a])return!1;if(0!=VCO.Util.trim(t[a]).length)return!1}return!0},parseYouTubeTime:function(t){if("string"==typeof t){if(parts=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i),parts){var e=parseInt(parts[1])||0,i=parseInt(parts[2])||0;return(parseInt(parts[3])||0)+60*i+60*e*60}}else if("number"==typeof t)return t;return 0}},function(t){var o,r,h,n,l,i,a,c,s,d,u,e,m,p,_,f,g,v,y,C,w,O,b,x,V,k,M,D,T,E,S,L=(c=(a=[]).slice,s=a.filter,d=window.document,u={},e={},m={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,v=/([A-Z])/g,y=["val","css","html","text","data","width","height","offset"],C=d.createElement("table"),w=d.createElement("tr"),O={tr:d.createElement("tbody"),tbody:C,thead:C,tfoot:C,td:w,th:w,"*":d.createElement("div")},b=/complete|loaded|interactive/,x=/^[\w-]*$/,k=(V={}).toString,M={},D=d.createElement("div"),T={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},E=Array.isArray||function(t){return t instanceof Array},M.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,a=t.parentNode,s=!a;return s&&(a=D).appendChild(t),n=~M.qsa(a,e).indexOf(t),s&&D.removeChild(t),n},l=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},i=function(i){return s.call(i,function(t,e){return i.indexOf(t)==e})},M.fragment=function(t,e,i){var n,a,s;return _.test(t)&&(n=h(d.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(f,"<$1></$2>")),e===o&&(e=p.test(t)&&RegExp.$1),e in O||(e="*"),(s=O[e]).innerHTML=""+t,n=h.each(c.call(s.childNodes),function(){s.removeChild(this)})),z(i)&&(a=h(n),h.each(i,function(t,e){-1<y.indexOf(t)?a[t](e):a.attr(t,e)})),n},M.Z=function(t,e){return(t=t||[]).__proto__=h.fn,t.selector=e||"",t},M.isZ=function(t){return t instanceof M.Z},M.init=function(t,e){var i,n;if(!t)return M.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&p.test(t))i=M.fragment(t,RegExp.$1,e),t=null;else{if(e!==o)return h(e).find(t);i=M.qsa(d,t)}else{if(I(t))return h(d).ready(t);if(M.isZ(t))return t;if(E(t))n=t,i=s.call(n,function(t){return null!=t});else if(P(t))i=[t],t=null;else if(p.test(t))i=M.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==o)return h(e).find(t);i=M.qsa(d,t)}}return M.Z(i,t)},(h=function(t,e){return M.init(t,e)}).extend=function(e){var i,t=c.call(arguments,1);return"boolean"==typeof e&&(i=e,e=t.shift()),t.forEach(function(t){!function t(e,i,n){for(r in i)n&&(z(i[r])||E(i[r]))?(z(i[r])&&!z(e[r])&&(e[r]={}),E(i[r])&&!E(e[r])&&(e[r]=[]),t(e[r],i[r],n)):i[r]!==o&&(e[r]=i[r])}(e,t,i)}),e},M.qsa=function(t,e){var i,n="#"==e[0],a=!n&&"."==e[0],s=n||a?e.slice(1):e,o=x.test(s);return j(t)&&o&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:c.call(o&&!n?a?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},h.contains=function(t,e){return t!==e&&t.contains(e)},h.type=N,h.isFunction=I,h.isWindow=A,h.isArray=E,h.isPlainObject=z,h.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},h.inArray=function(t,e,i){return a.indexOf.call(e,t,i)},h.camelCase=l,h.trim=function(t){return null==t?"":String.prototype.trim.call(t)},h.uuid=0,h.support={},h.expr={},h.map=function(t,e){var i,n,a,s,o=[];if(U(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&o.push(i);else for(a in t)null!=(i=e(t[a],a))&&o.push(i);return 0<(s=o).length?h.fn.concat.apply([],s):s},h.each=function(t,e){var i,n;if(U(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},h.grep=function(t,e){return s.call(t,e)},window.JSON&&(h.parseJSON=JSON.parse),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()}),h.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(i){return h(h.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return h(c.apply(this,arguments))},ready:function(t){return b.test(d.readyState)&&d.body?t(h):d.addEventListener("DOMContentLoaded",function(){t(h)},!1),this},get:function(t){return t===o?c.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return a.every.call(this,function(t,e){return!1!==i.call(t,e,t)}),this},filter:function(e){return I(e)?this.not(this.not(e)):h(s.call(this,function(t){return M.matches(t,e)}))},add:function(t,e){return h(i(this.concat(h(t,e))))},is:function(t){return 0<this.length&&M.matches(this[0],t)},not:function(e){var i,n=[];return I(e)&&e.call!==o?this.each(function(t){e.call(this,t)||n.push(this)}):(i="string"==typeof e?this.filter(e):U(e)&&I(e.item)?c.call(e):h(e),this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})),h(n)},has:function(t){return this.filter(function(){return P(t)?h.contains(this,t):h(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!P(t)?t:h(t)},last:function(){var t=this[this.length-1];return t&&!P(t)?t:h(t)},find:function(t){var i=this,e="object"==typeof t?h(t).filter(function(){var e=this;return a.some.call(i,function(t){return h.contains(t,e)})}):1==this.length?h(M.qsa(this[0],t)):this.map(function(){return M.qsa(this,t)});return e},closest:function(t,e){var i=this[0],n=!1;for("object"==typeof t&&(n=h(t));i&&!(n?0<=n.indexOf(i):M.matches(i,t));)i=i!==e&&!j(i)&&i.parentNode;return h(i)},parents:function(t){for(var e=[],i=this;0<i.length;)i=h.map(i,function(t){if((t=t.parentNode)&&!j(t)&&e.indexOf(t)<0)return e.push(t),t});return H(e,t)},parent:function(t){return H(i(this.pluck("parentNode")),t)},children:function(t){return H(this.map(function(){return F(this)}),t)},contents:function(){return this.map(function(){return c.call(this.childNodes)})},siblings:function(t){return H(this.map(function(t,e){return s.call(F(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return h.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,u[t]||(e=d.createElement(t),d.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),u[t]=i),u[t]))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var i,n,a=I(e);return this[0]&&!a&&(i=h(e).get(0),n=i.parentNode||1<this.length),this.each(function(t){h(this).wrapAll(a?e.call(this,t):n?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(h(this[0]).before(t=h(t));(e=t.children()).length;)t=e.first();h(t).append(this)}return this},wrapInner:function(a){var s=I(a);return this.each(function(t){var e=h(this),i=e.contents(),n=s?a.call(this,t):a;i.length?i.wrapAll(n):e.append(n)})},unwrap:function(){return this.parent().each(function(){h(this).replaceWith(h(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=h(this);(e===o?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(t){return h(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return h(this.pluck("nextElementSibling")).filter(t||"*")},html:function(i){return 0===arguments.length?0<this.length?this[0].innerHTML:null:this.each(function(t){var e=this.innerHTML;h(this).empty().append(W(this,i,t,e))})},text:function(t){return 0===arguments.length?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=t===o?"":""+t})},attr:function(e,i){var t;return"string"==typeof e&&i===o?0==this.length||1!==this[0].nodeType?o:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(t=this[0].getAttribute(e))&&e in this[0]?this[0][e]:t:this.each(function(t){if(1===this.nodeType)if(P(e))for(r in e)$(this,r,e[r]);else $(this,e,W(this,i,t,this.getAttribute(e)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&$(this,t)})},prop:function(e,i){return e=T[e]||e,i===o?this[0]&&this[0][e]:this.each(function(t){this[e]=W(this,i,t,this[e])})},data:function(t,e){var i=this.attr("data-"+t.replace(v,"-$1").toLowerCase(),e);return null!==i?Y(i):o},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?h(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=W(this,e,t,this.value)})},offset:function(s){if(s)return this.each(function(t){var e=h(this),i=W(this,s,t,e.offset()),n=e.offsetParent().offset(),a={top:i.top-n.top,left:i.left-n.left};"static"==e.css("position")&&(a.position="relative"),e.css(a)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,e){if(arguments.length<2){var i=this[0],n=getComputedStyle(i,"");if(!i)return;if("string"==typeof t)return i.style[l(t)]||n.getPropertyValue(t);if(E(t)){var a={};return h.each(E(t)?t:[t],function(t,e){a[e]=i.style[l(e)]||n.getPropertyValue(e)}),a}}var s="";if("string"==N(t))e||0===e?s=B(t)+":"+R(t,e):this.each(function(){this.style.removeProperty(B(t))});else for(r in t)t[r]||0===t[r]?s+=B(r)+":"+R(r,t[r])+";":this.each(function(){this.style.removeProperty(B(r))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(h(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&a.some.call(this,function(t){return this.test(Z(t))},q(t))},addClass:function(i){return i?this.each(function(t){n=[];var e=Z(this);W(this,i,t,e).split(/\s+/g).forEach(function(t){h(this).hasClass(t)||n.push(t)},this),n.length&&Z(this,e+(e?" ":"")+n.join(" "))}):this},removeClass:function(e){return this.each(function(t){if(e===o)return Z(this,"");n=Z(this),W(this,e,t,n).split(/\s+/g).forEach(function(t){n=n.replace(q(t)," ")}),Z(this,n.trim())})},toggleClass:function(i,n){return i?this.each(function(t){var e=h(this);W(this,i,t,Z(this)).split(/\s+/g).forEach(function(t){(n===o?!e.hasClass(t):n)?e.addClass(t):e.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===o?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===o?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=g.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(h(t).css("margin-top"))||0,i.left-=parseFloat(h(t).css("margin-left"))||0,n.top+=parseFloat(h(e[0]).css("border-top-width"))||0,n.left+=parseFloat(h(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||d.body;t&&!g.test(t.nodeName)&&"static"==h(t).css("position");)t=t.offsetParent;return t})}},h.fn.detach=h.fn.remove,["width","height"].forEach(function(n){var a=n.replace(/./,function(t){return t[0].toUpperCase()});h.fn[n]=function(e){var t,i=this[0];return e===o?A(i)?i["inner"+a]:j(i)?i.documentElement["scroll"+a]:(t=this.offset())&&t[n]:this.each(function(t){(i=h(this)).css(n,W(this,e,t,i[n]()))})}}),["after","prepend","before","append"].forEach(function(e,s){var o=s%2;h.fn[e]=function(){var e,i,n=h.map(arguments,function(t){return"object"==(e=N(t))||"array"==e||null==t?t:M.fragment(t)}),a=1<this.length;return n.length<1?this:this.each(function(t,e){i=o?e:e.parentNode,e=0==s?e.nextSibling:1==s?e.firstChild:2==s?e:null,n.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!i)return h(t).remove();!function t(e,i){for(var n in i(e),e.childNodes)t(e.childNodes[n],i)}(i.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},h.fn[o?e+"To":"insert"+(s?"Before":"After")]=function(t){return h(t)[e](this),this}}),M.Z.prototype=h.fn,M.uniq=i,M.deserializeValue=Y,h.zepto=M,h);function N(t){return null==t?String(t):V[k.call(t)]||"object"}function I(t){return"function"==N(t)}function A(t){return null!=t&&t==t.window}function j(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function P(t){return"object"==N(t)}function z(t){return P(t)&&!A(t)&&Object.getPrototypeOf(t)==Object.prototype}function U(t){return"number"==typeof t.length}function B(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function q(t){return t in e?e[t]:e[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function R(t,e){return"number"!=typeof e||m[B(t)]?e:e+"px"}function F(t){return"children"in t?c.call(t.children):h.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function H(t,e){return null==e?h(t):h(t).filter(e)}function W(t,e,i,n){return I(e)?e.call(t,i,n):e}function $(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function Z(t,e){var i=t.className,n=i&&i.baseVal!==o;if(e===o)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function Y(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?h.parseJSON(e):e:t):e}catch(t){return e}}window.Zepto=L,void 0===window.$&&(window.$=L),function(c){c.zepto.qsa;function l(t){return"string"==typeof t}var d,e=1,u=Array.prototype.slice,m=c.isFunction,p={},s={},i="onfocusin"in window,n={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};function f(t){return t._zid||(t._zid=e++)}function o(t,e,i,n){var a,s;return(e=g(e)).ns&&(s=e.ns,a=new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)")),(p[f(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||a.test(t.ns))&&(!i||f(t.fn)===f(i))&&(!n||t.sel==n)})}function g(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function v(t,e){return t.del&&!i&&t.e in n||!!e}function y(t){return _[t]||i&&n[t]||t}function C(a,t,e,s,o,r,h){var i=f(a),l=p[i]||(p[i]=[]);t.split(/\s/).forEach(function(t){if("ready"==t)return c(document).ready(e);var i=g(t);i.fn=e,i.sel=o,i.e in _&&(e=function(t){var e=t.relatedTarget;if(!e||e!==this&&!c.contains(this,e))return i.fn.apply(this,arguments)});var n=(i.del=r)||e;i.proxy=function(t){if(!(t=b(t)).isImmediatePropagationStopped()){t.data=s;var e=n.apply(a,t._args==d?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},i.i=l.length,l.push(i),"addEventListener"in a&&a.addEventListener(y(i.e),i.proxy,v(i,h))})}function w(e,t,i,n,a){var s=f(e);(t||"").split(/\s/).forEach(function(t){o(e,t,i,n).forEach(function(t){delete p[s][t.i],"removeEventListener"in e&&e.removeEventListener(y(t.e),t.proxy,v(t,a))})})}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",c.event={add:C,remove:w},c.proxy=function(t,e){if(m(t)){function i(){return t.apply(e,arguments)}return i._zid=f(t),i}if(l(e))return c.proxy(t[e],t);throw new TypeError("expected function")},c.fn.bind=function(t,e,i){return this.on(t,e,i)},c.fn.unbind=function(t,e){return this.off(t,e)},c.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var r=function(){return!0},O=function(){return!1},a=/^([A-Z]|returnValue$|layer[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function b(n,a){return!a&&n.isDefaultPrevented||(a=a||n,c.each(t,function(t,e){var i=a[t];n[t]=function(){return this[e]=r,i&&i.apply(a,arguments)},n[e]=O}),(a.defaultPrevented!==d?a.defaultPrevented:"returnValue"in a?!1===a.returnValue:a.getPreventDefault&&a.getPreventDefault())&&(n.isDefaultPrevented=r)),n}function x(t){var e,i={originalEvent:t};for(e in t)a.test(e)||t[e]===d||(i[e]=t[e]);return b(i,t)}c.fn.delegate=function(t,e,i){return this.on(e,t,i)},c.fn.undelegate=function(t,e,i){return this.off(e,t,i)},c.fn.live=function(t,e){return c(document.body).delegate(this.selector,t,e),this},c.fn.die=function(t,e){return c(document.body).undelegate(this.selector,t,e),this},c.fn.on=function(e,a,i,s,o){var r,h,n=this;return e&&!l(e)?(c.each(e,function(t,e){n.on(t,a,i,e,o)}),n):(l(a)||m(s)||!1===s||(s=i,i=a,a=d),!m(i)&&!1!==i||(s=i,i=d),!1===s&&(s=O),n.each(function(t,n){o&&(r=function(t){return w(n,t.type,s),s.apply(this,arguments)}),a&&(h=function(t){var e,i=c(t.target).closest(a,n).get(0);if(i&&i!==n)return e=c.extend(x(t),{currentTarget:i,liveFired:n}),(r||s).apply(i,[e].concat(u.call(arguments,1)))}),C(n,e,s,i,a,h||r)}))},c.fn.off=function(t,i,e){var n=this;return t&&!l(t)?(c.each(t,function(t,e){n.off(t,i,e)}),n):(l(i)||m(e)||!1===e||(e=i,i=d),!1===e&&(e=O),n.each(function(){w(this,t,e,i)}))},c.fn.trigger=function(t,e){return(t=l(t)||c.isPlainObject(t)?c.Event(t):b(t))._args=e,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):c(this).triggerHandler(t,e)})},c.fn.triggerHandler=function(i,n){var a,s;return this.each(function(t,e){(a=x(l(i)?c.Event(i):i))._args=n,a.target=e,c.each(o(e,i.type||i),function(t,e){if(s=e.proxy(a),a.isImmediatePropagationStopped())return!1})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){c.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){c.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),c.Event=function(t,e){l(t)||(t=(e=t).type);var i=document.createEvent(s[t]||"Events"),n=!0;if(e)for(var a in e)"bubbles"==a?n=!!e[a]:i[a]=e[a];return i.initEvent(t,n,!0),b(i)}}(L),function(_){var f,g,c=0,d=window.document,h=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,v=/^(?:text|application)\/javascript/i,y=/^(?:text|application)\/xml/i,C="application/json",w="text/html",O=/^\s*$/;function b(t,e,i,n){if(t.global)return a=e||d,s=i,o=n,r=_.Event(s),_(a).trigger(r,o),!r.isDefaultPrevented();var a,s,o,r}function x(t,e){var i=e.context;if(!1===e.beforeSend.call(i,t,e)||!1===b(e,i,"ajaxBeforeSend",[t,e]))return!1;b(e,i,"ajaxSend",[t,e])}function V(t,e,i,n){var a=i.context,s="success";i.success.call(a,t,s,e),n&&n.resolveWith(a,[t,s,e]),b(i,a,"ajaxSuccess",[e,i,t]),o(s,e,i)}function k(t,e,i,n,a){var s=n.context;n.error.call(s,i,e,t),a&&a.rejectWith(s,[i,e,t]),b(n,s,"ajaxError",[i,n,t||e]),o(e,i,n)}function o(t,e,i){var n,a=i.context;i.complete.call(a,e,t),b(i,a,"ajaxComplete",[e,i]),(n=i).global&&!--_.active&&b(n,null,"ajaxStop")}function M(){}function D(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function l(t,e,i,n){var a=!_.isFunction(e);return{url:t,data:a?e:void 0,success:a?_.isFunction(i)?i:void 0:e,dataType:a&&n||i}}_.active=0,_.ajaxJSONP=function(i,n){if(!("type"in i))return _.ajax(i);function t(t){_(r).triggerHandler("error",t||"abort")}var a,s,e=i.jsonpCallback,o=(_.isFunction(e)?e():e)||"jsonp"+ ++c,r=d.createElement("script"),h=window[o],l={abort:t};return n&&n.promise(l),_(r).on("load error",function(t,e){clearTimeout(s),_(r).off().remove(),"error"!=t.type&&a?V(a[0],l,i,n):k(null,e||"error",l,i,n),window[o]=h,a&&_.isFunction(h)&&h(a[0]),h=a=void 0}),!1===x(l,i)?t("abort"):(window[o]=function(){a=arguments},r.src=i.url.replace(/\?(.+)=\?/,"?$1="+o),d.head.appendChild(r),0<i.timeout&&(s=setTimeout(function(){t("timeout")},i.timeout))),l},_.ajaxSettings={type:"GET",beforeSend:M,success:M,error:M,complete:M,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:C,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},_.ajax=function(t){var e,i,n=_.extend({},t||{}),a=_.Deferred&&_.Deferred();for(f in _.ajaxSettings)void 0===n[f]&&(n[f]=_.ajaxSettings[f]);(e=n).global&&0==_.active++&&b(e,null,"ajaxStart"),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),(i=n).processData&&i.data&&"string"!=_.type(i.data)&&(i.data=_.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()||(i.url=D(i.url,i.data),i.data=void 0),!1===n.cache&&(n.url=D(n.url,"_="+Date.now()));var s=n.dataType,o=/\?.+=\?/.test(n.url);if("jsonp"==s||o)return o||(n.url=D(n.url,n.jsonp?n.jsonp+"=?":!1===n.jsonp?"":"callback=?")),_.ajaxJSONP(n,a);function r(t,e){c[t.toLowerCase()]=[t,e]}var h,l=n.accepts[s],c={},d=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,u=n.xhr(),m=u.setRequestHeader;if(a&&a.promise(u),n.crossDomain||r("X-Requested-With","XMLHttpRequest"),r("Accept",l||"*/*"),(l=n.mimeType||l)&&(-1<l.indexOf(",")&&(l=l.split(",",2)[0]),u.overrideMimeType&&u.overrideMimeType(l)),(n.contentType||!1!==n.contentType&&n.data&&"GET"!=n.type.toUpperCase())&&r("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(g in n.headers)r(g,n.headers[g]);if(u.setRequestHeader=r,!(u.onreadystatechange=function(){if(4==u.readyState){u.onreadystatechange=M,clearTimeout(h);var t,e=!1;if(200<=u.status&&u.status<300||304==u.status||0==u.status&&"file:"==d){s=s||((i=(i=n.mimeType||u.getResponseHeader("content-type"))&&i.split(";",2)[0])&&(i==w?"html":i==C?"json":v.test(i)?"script":y.test(i)&&"xml")||"text"),t=u.responseText;try{"script"==s?(0,eval)(t):"xml"==s?t=u.responseXML:"json"==s&&(t=O.test(t)?null:_.parseJSON(t))}catch(t){e=t}e?k(e,"parsererror",u,n,a):V(t,u,n,a)}else k(u.statusText||null,u.status?"error":"abort",u,n,a)}var i})===x(u,n))return u.abort(),k(null,"abort",u,n,a),u;if(n.xhrFields)for(g in n.xhrFields)u[g]=n.xhrFields[g];var p=!("async"in n)||n.async;for(g in u.open(n.type,n.url,p,n.username,n.password),c)m.apply(u,c[g]);return 0<n.timeout&&(h=setTimeout(function(){u.onreadystatechange=M,u.abort(),k(null,"timeout",u,n,a)},n.timeout)),u.send(n.data?n.data:null),u},_.get=function(t,e,i,n){return _.ajax(l.apply(null,arguments))},_.post=function(t,e,i,n){var a=l.apply(null,arguments);return a.type="POST",_.ajax(a)},_.getJSON=function(t,e,i){var n=l.apply(null,arguments);return n.dataType="json",_.ajax(n)},_.fn.load=function(t,e,i){if(!this.length)return this;var n,a=this,s=t.split(/\s/),o=l(t,e,i),r=o.success;return 1<s.length&&(o.url=s[0],n=s[1]),o.success=function(t){a.html(n?_("<div>").html(t.replace(h,"")).find(n):t),r&&r.apply(a,arguments)},_.ajax(o),this};var n=encodeURIComponent;_.param=function(t,e){var i=[];return i.add=function(t,e){this.push(n(t)+"="+n(e))},function i(n,t,a,s){var o,r=_.isArray(t),h=_.isPlainObject(t);_.each(t,function(t,e){o=_.type(e),s&&(t=a?s:s+"["+(h||"object"==o||"array"==o?t:"")+"]"),!s&&r?n.add(e.name,e.value):"array"==o||!a&&"object"==o?i(n,e,a,t):n.add(t,e)})}(i,t,e),i.join("&").replace(/%20/g,"+")}}(L),(S=L).fn.serializeArray=function(){var e,i=[];return S([].slice.call(this.get(0).elements)).each(function(){var t=(e=S(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&("radio"!=t&&"checkbox"!=t||this.checked)&&i.push({name:e.attr("name"),value:e.val()})}),i},S.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},S.fn.submit=function(t){var e;return t?this.bind("submit",t):this.length&&(e=S.Event("submit"),this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()),this},function(i){"__proto__"in{}||i.extend(i.zepto,{Z:function(t,e){return t=t||[],i.extend(t,i.fn),t.selector=e||"",t.__Z=!0,t},isZ:function(t){return"array"===i.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(t){return null}}}}(L),t.getJSON=L.getJSON,t.ajax=L.ajax}(VCO),VCO.Class=function(){},VCO.Class.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments)}function i(){}i.prototype=this.prototype;var n=new i;for(var a in(n.constructor=e).prototype=n,e.superclass=this.prototype,this)this.hasOwnProperty(a)&&"prototype"!==a&&"superclass"!==a&&(e[a]=this[a]);return t.statics&&(VCO.Util.extend(e,t.statics),delete t.statics),t.includes&&(VCO.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=VCO.Util.extend({},n.options,t.options)),VCO.Util.extend(n,t),e.extend=VCO.Class.extend,e.include=function(t){VCO.Util.extend(this.prototype,t)},e},VCO.Events={addEventListener:function(t,e,i){var n=this._vco_events=this._vco_events||{};return n[t]=n[t]||[],n[t].push({action:e,context:i||this}),this},hasEventListeners:function(t){var e="_vco_events";return e in this&&t in this[e]&&0<this[e][t].length},removeEventListener:function(t,e,i){if(!this.hasEventListeners(t))return this;for(var n=0,a=this._vco_events,s=a[t].length;n<s;n++)if(a[t][n].action===e&&(!i||a[t][n].context===i))return a[t].splice(n,1),this;return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=VCO.Util.extend({type:t,target:this},e),n=this._vco_events[t].slice(),a=0,s=n.length;a<s;a++)n[a].action.call(n[a].context||this,i);return this}},VCO.Events.on=VCO.Events.addEventListener,VCO.Events.off=VCO.Events.removeEventListener,VCO.Events.fire=VCO.Events.fireEvent,function(){var t,e=navigator.userAgent.toLowerCase(),i=document.documentElement,n="ActiveXObject"in window,a=-1!==e.indexOf("webkit"),s=-1!==e.indexOf("phantom"),o=-1!==e.search("android [23]"),r="undefined"!=typeof orientation,h=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent,l=window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||h,c=n&&"transition"in i.style,d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!o,u="MozPerspective"in i.style,m="OTransition"in i.style,p=(window.opera,"devicePixelRatio"in window&&1<window.devicePixelRatio);!p&&"matchMedia"in window&&(p=(t=window.matchMedia("(min-resolution:144dpi)"))&&t.matches);var _=!window.L_NO_TOUCH&&!s&&(l||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);VCO.Browser={ie:n,ielt9:n&&!document.addEventListener,webkit:a,firefox:-1!==e.indexOf("gecko")&&!a&&!window.opera&&!n,android:-1!==e.indexOf("android"),android23:o,chrome:-1!==e.indexOf("chrome"),ie3d:c,webkit3d:d,gecko3d:u,opera3d:m,any3d:!window.L_DISABLE_3D&&(c||d||u||m)&&!s,mobile:r,mobileWebkit:r&&a,mobileWebkit3d:r&&d,mobileOpera:r&&window.opera,touch:!!_,msPointer:!!h,pointer:!!l,retina:!!p,orientation:function(){var t=window.innerWidth,e=window.innerHeight<t?"landscape":"portrait";return Math.abs(window.orientation),trace(e),e}}}(),VCO.Load=function(){var n=[];function a(t){for(var e=0,i=!1,e=0;e<n.length;e++)n[e]==t&&(i=!0);return i||void n.push(t)}return{css:function(t,e,i,n){a(t)?e():VCO.LoadIt.css(t,e,i,n)},js:function(t,e,i,n){a(t)?e():VCO.LoadIt.js(t,e,i,n)}}}(this.document),VCO.LoadIt=function(_){var f,g,v={},a=0,y={css:[],js:[]},i=_.styleSheets;function C(t,e){var i,n=_.createElement(t);for(i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}function w(t){var e,i,n=v[t];n&&(e=n.callback,(i=n.urls).shift(),a=0,i.length||(e&&e.call(n.context,n.obj),v[t]=null,y[t].length&&s(t)))}function s(t,e,i,n,a){function s(){w(t)}var o,r,h,l,c,d,u,m="css"===t,p=[];if(f||(u=navigator.userAgent,((f={async:!0===_.createElement("script").async}).webkit=/AppleWebKit\//.test(u))||(f.ie=/MSIE/.test(u))||(f.opera=/Opera/.test(u))||(f.gecko=/Gecko\//.test(u))||(f.unknown=!0)),e)if(e="string"==typeof e?[e]:e.concat(),m||f.async||f.gecko||f.opera)y[t].push({urls:e,callback:i,obj:n,context:a});else for(o=0,r=e.length;o<r;++o)y[t].push({urls:[e[o]],callback:o===r-1?i:null,obj:n,context:a});if(!v[t]&&(l=v[t]=y[t].shift())){for(g=g||(_.head||_.getElementsByTagName("head")[0]),o=0,r=(c=l.urls).length;o<r;++o)d=c[o],m?h=f.gecko?C("style"):C("link",{href:d,rel:"stylesheet"}):(h=C("script",{src:d})).async=!1,h.className="lazyload",h.setAttribute("charset","utf-8"),f.ie&&!m?h.onreadystatechange=function(){/loaded|complete/.test(h.readyState)&&(h.onreadystatechange=null,s())}:m&&(f.gecko||f.webkit)?f.webkit?(l.urls[o]=h.href,b()):(h.innerHTML='@import "'+d+'";',O(h)):h.onload=h.onerror=s,p.push(h);for(o=0,r=p.length;o<r;++o)g.appendChild(p[o])}}function O(e){var i;try{i=!!e.sheet.cssRules}catch(t){return void((a+=1)<200?setTimeout(function(){O(e)},50):i&&w("css"))}w("css")}function b(){var t,e=v.css;if(e){for(t=i.length;0<=--t;)if(i[t].href===e.urls[0]){w("css");break}a+=1,e&&(a<200?setTimeout(b,50):w("css"))}}return{css:function(t,e,i,n){s("css",t,e,i,n)},js:function(t,e,i,n){s("js",t,e,i,n)}}}(this.document),VCO.TimelineConfig=VCO.Class.extend({includes:[],title:null,scale:null,events:[],messages:{errors:[],warnings:[]},VALID_PROPERTIES:["scale","title","events"],initialize:function(t){"object"==typeof t&&t.events&&(this._importProperties(t),this._cleanData())},logError:function(t){trace(t),this.messages.errors.push(t)},getErrors:function(t){return t?this.messages.errors.join(t):this.messages.errors},validate:function(){void 0!==this.events&&void 0!==this.events.length&&0!=this.events.length||this.logError("Timeline configuration has no events.")},isValid:function(){return 0==this.messages.errors.length},addEvent:function(t){var e=this.title?this.title.unique_id:"";this.events.push(t),this._makeunique_identifiers(e,this.events),this._processDates(this.events);var i=this.events[this.events.length-1].unique_id;return VCO.DateUtil.sortByDate(this.events),i},_cleanData:function(){var t=this.title?this.title.unique_id:"";this._makeunique_identifiers(t,this.events),this._processDates(this.events),this._cleanGroups(this.events),VCO.DateUtil.sortByDate(this.events)},_importProperties:function(t){for(var e=0;e<this.VALID_PROPERTIES.length;e++)k=this.VALID_PROPERTIES[e],this[k]=t[k];!this.title||"unique_id"in this.title||(this.title.unique_id="")},_makeunique_identifiers:function(t,e){for(var i=[t],n=0;n<e.length;n++)e[n].unique_id&&0<e[n].unique_id.replace(/\s+/,"").length&&(e[n].unique_id=VCO.Util.slugify(e[n].unique_id),-1!=i.indexOf(e[n].unique_id)?e[n].unique_id="":i.push(e[n].unique_id));if(i.length!=e.length+1)for(var a,n=0;n<e.length;n++){e[n].unique_id||(a=(a=e[n].text?VCO.Util.slugify(e[n].text.headline):null)||VCO.Util.unique_ID(6),-1!=i.indexOf(a)&&(a=a+"-"+n),i.push(a),e[n].unique_id=a)}},_processDates:function(t){var e=null;if(!this.scale){trace("Determining scale dynamically"),this.scale="human";for(var i=0;i<t.length;i++)if(void 0===t[i].start_date)this.logError("item "+i+" is missing a start_date");else if(void 0!==t[i].start_date.year&&t[i].start_date.year.match(/^\s*\-?\d+\s*$/)){var n=new VCO.BigDate(t[i].start_date).data.date_obj.year;if(n<-271820||275759<n){this.scale="cosmological";break}}else this.logError("item "+i+" is has invalid start_date.")}"human"==this.scale?(e=VCO.Date,trace("using VCO.Date")):"cosmological"==this.scale?(e=VCO.BigDate,trace("using VCO.BigDate")):this.logError("Don't know how to process dates on scale "+this.scale);for(i=0;i<t.length;i++)if(void 0===t[i].start_date&&this.logError("item "+i+" is missing a start_date"),!(t[i].start_date instanceof e)){var a=t[i].start_date;if(t[i].start_date=new e(a),void 0!==t[i].end_date&&!(t[i].end_date instanceof e)){var s=t[i].end_date,o=!0;for(property in a)o=o&&a[property]==s[property];o?(trace("End date same as start date is redundant; dropping end date"),delete t[i].end_date):t[i].end_date=new e(s)}}},_cleanGroups:function(t){for(var e=0;e<t.length;e++)t[e].group&&(t[e].group=VCO.Util.trim(t[e].group))}}),function(s){function o(t){parts={key:null,worksheet:0};var e,i,n=/\bkey=([-_A-Za-z0-9]+)&?/i;return t.match(n)?parts.key=t.match(n)[1]:t.match("docs.google.com/spreadsheets/d/")?(e=t.indexOf("docs.google.com/spreadsheets/d/")+"docs.google.com/spreadsheets/d/".length,i=t.substr(e),parts.key=i.split("/")[0],t.match(/\?gid=(\d+)/)&&(parts.worksheet=t.match(/\?gid=(\d+)/)[1])):t.match(/^\b[-_A-Za-z0-9]+$/)&&(parts.key=t),parts.key?parts:null}function r(t){var e={};for(k in t)0==k.indexOf("gsx$")&&(e[k.substr(4)]=t[k].$t);if(s.Util.isEmptyObject(e))return null;var i={media:{caption:e.mediacaption||"",credit:e.mediacredit||"",url:e.media||"",thumbnail:e.mediathumbnail||""},text:{headline:e.headline||"",text:e.text||""},group:e.tag||"",type:e.type||""};return e.startdate&&(i.start_date=s.Date.parseDate(e.startdate)),e.enddate&&(i.end_date=s.Date.parseDate(e.enddate)),i}function h(t){function e(t){if(t)return t.replace(/[\s,]+/g,"")}var i={};for(k in t)0==k.indexOf("gsx$")&&(i[k.substr(4)]=s.Util.trim(t[k].$t));if(s.Util.isEmptyObject(i))return null;var n,a={media:{caption:i.mediacaption||"",credit:i.mediacredit||"",url:i.media||"",thumbnail:i.mediathumbnail||""},text:{headline:i.headline||"",text:i.text||""},start_date:{year:e(i.year),month:e(i.month)||"",day:e(i.day)||""},end_date:{year:e(i.endyear)||"",month:e(i.endmonth)||"",day:e(i.endday)||""},display_date:i.displaydate||"",type:i.type||""};return i.time&&s.Util.extend(a.start_date,s.DateUtil.parseTime(i.time)),i.endtime&&s.Util.extend(a.end_date,s.DateUtil.parseTime(i.endtime)),i.group&&(a.group=i.group),""==a.end_date.year&&(n=a.end_date,delete a.end_date,""==n.month&&""==n.day&&""==n.time||(a.text.headline||trace("Invalid end date for spreadsheet row. Must have a year if any other date fields are specified."),trace(t))),i.background&&(i.background.match(/^(https?:)?\/\/?/)?a.background={url:i.background}:a.background={color:i.background}),a}function l(t){var t="https://spreadsheets.google.com/feeds/list/"+o(t).key+"/1/public/values?alt=json",e=s.ajax({url:t,async:!1}),e=JSON.parse(e.responseText);return i(e)}var i=function(t){for(var e={events:[],errors:[]},i=function(t){if(void 0===t.feed.entry||0==t.feed.entry.length)throw"No data entries found.";var e=t.feed.entry[0];if(void 0!==e.gsx$startdate)return r;if(void 0!==e.gsx$year)return h;throw"Invalid data format."}(t),n=0;n<t.feed.entry.length;n++)try{var a,s=i(t.feed.entry[n]);s&&(a="event",void 0!==s.type&&(a=s.type,delete s.type),"title"==a?e.title=s:e.events.push(s))}catch(t){t.message&&(t=t.message),e.errors.push(t+" ["+n+"]")}return e};s.ConfigFactory={parseGoogleSpreadsheetURL:o,googleFeedJSONtoTimelineJSON:i,fromGoogle:function(t){return console.log("VCO.ConfigFactory.fromGoogle is deprecated and will be removed soon. Use VCO.ConfigFactory.makeConfig(url,callback)"),l(t)},makeConfig:function(t,e){if(o(t)){var i=l(t),n=new s.TimelineConfig(i);if(i.errors)for(var a=0;a<i.errors.length;a++)n.logError(i.errors[a]);e(n)}else s.getJSON(t,function(t){e(new s.TimelineConfig(t))})}}}(VCO),VCO.Language=function(t){for(k in VCO.Language.languages.en)this[k]=VCO.Language.languages.en[k];if(t&&t.language&&"string"==typeof t.language&&"en"!=t.language){var e,i,n,a=t.language;if(!(a in VCO.Language.languages)){n=/\.json$/.test(a)?a:(e="/locale/"+a+".json",i=t.script_path||VCO.Timeline.source_path,/\/$/.test(i)&&(e=e.substr(1)),i+e);var s=VCO.ajax({url:n,async:!1});if(200!=s.status)throw"Could not load language ["+a+"]: "+s.statusText;VCO.Language.languages[a]=JSON.parse(s.responseText)}VCO.Util.mergeData(this,VCO.Language.languages[a])}},VCO.Language.formatNumber=function(t,e){if(e.match(/%(\.(\d+))?f/)){var i=e.match(/%(\.(\d+))?f/),n=i[0];return i[2]&&(t=t.toFixed(i[2])),e.replace(n,t)}return e},VCO.Language.prototype.mergeData=function(t){for(k in VCO.Language.languages.en)t[k]&&("object"==typeof this[k]?VCO.Util.mergeData(t[k],this[k]):this[k]=t[k])},VCO.Language.fallback={messages:{}},VCO.Language.prototype.getMessage=function(t){return this.messages[t]||VCO.Language.fallback.messages[t]||t},VCO.Language.prototype._=VCO.Language.prototype.getMessage,VCO.Language.prototype.formatDate=function(t,e){return t.constructor==Date?this.formatJSDate(t,e):t.constructor==VCO.BigYear?this.formatBigYear(t,e):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,e):(trace("Unfamiliar date presented for formatting"),t.toString())},VCO.Language.prototype.formatBigYear=function(t,e){var i=t.year,n=this.bigdateformats[e]||this.bigdateformats.fallback;if(n){for(var a=0;a<n.length;a++){var s=n[a];if(1<Math.abs(i/s[0]))return VCO.Language.formatNumber(Math.abs(i/s[0]),s[1])}return i.toString()}return trace("Language file dateformats missing cosmological. Falling back."),VCO.Language.formatNumber(i,e)},VCO.Language.prototype.formatJSDate=function(t,e){function i(t,e){var i=n.period_labels[t];return i&&(t=e<12?i[0]:i[1]),"<span class='vco-timeaxis-timesuffix'>"+t+"</span>"}var n=this;e=e||"full";var a=(a=this.dateformats[e]||VCO.Language.fallback.dateformats[e])||e,s=t.getDate(),o=t.getDay(),r=t.getMonth(),h=t.getFullYear(),l=t.getHours(),c=t.getMinutes(),d=t.getSeconds(),u=t.getMilliseconds(),m=t.getTimezoneOffset(),p={d:s,dd:VCO.Util.pad(s),ddd:this.date.day_abbr[o],dddd:this.date.day[o],m:r+1,mm:VCO.Util.pad(r+1),mmm:this.date.month_abbr[r],mmmm:this.date.month[r],yy:String(h).slice(2),yyyy:h<0&&this.has_negative_year_modifier()?Math.abs(h):h,h:l%12||12,hh:VCO.Util.pad(l%12||12),H:l,HH:VCO.Util.pad(l),M:c,MM:VCO.Util.pad(c),s:d,ss:VCO.Util.pad(d),l:VCO.Util.pad(u,3),L:VCO.Util.pad(99<u?Math.round(u/10):u),t:i("t",l),tt:i("tt",l),T:i("T",l),TT:i("TT",l),Z:(String(t).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(0<m?"-":"+")+VCO.Util.pad(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][3<s%10?0:(s%100-s%10!=10)*s%10]},_=a.replace(VCO.Language.DATE_FORMAT_TOKENS,function(t){return t in p?p[t]:t.slice(1,t.length-1)});return this._applyEra(_,h)},VCO.Language.prototype.has_negative_year_modifier=function(){return Boolean(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)},VCO.Language.prototype._applyEra=function(t,e){var i=e<0?this.era_labels.negative_year:this.era_labels.positive_year,n="";return i.prefix&&(n+="<span>"+i.prefix+"</span> "),n+=t,i.suffix&&(n+=" <span>"+i.suffix+"</span>"),n},VCO.Language.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,VCO.Language.languages={en:{name:"English",lang:"en",messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}},VCO.Language.fallback=new VCO.Language,VCO.I18NMixins={getLanguage:function(){return this.options&&this.options.language?this.options.language:(trace("Expected a language option"),VCO.Language.fallback)},_:function(t){return this.getLanguage()._(t)}},VCO.Easings={ease:[.25,.1,.25,1],linear:[0,0,1,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]},VCO.Ease={KeySpline:function(h){function l(t,e){return 1-3*e+3*t}function c(t,e){return 3*e-6*t}function d(t,e,i){return((l(e,i)*t+c(e,i))*t+3*e)*t}this.get=function(t){return h[0]==h[1]&&h[2]==h[3]?t:d(function(t){for(var e=t,i=0;i<4;++i){var n=(s=e,o=h[0],r=h[2],3*l(o,r)*s*s+2*c(o,r)*s+3*o);if(0==n)return e;var a=d(e,h[0],h[2])-t;e-=a/n}var s,o,r;return e}(t),h[1],h[3])}},easeInSpline:function(t){return new VCO.Ease.KeySpline(VCO.Easings.easein).get(t)},easeInOutExpo:function(t){return new VCO.Ease.KeySpline(VCO.Easings.easein).get(t)},easeOut:function(t){return Math.sin(t*Math.PI/2)},easeOutStrong:function(t){return 1==t?1:1-Math.pow(2,-10*t)},easeIn:function(t){return t*t},easeInStrong:function(t){return 0==t?0:Math.pow(2,10*(t-1))},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return--t*t*(2.70158*t+1.70158)+1},bounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},swingTo:function(t){return--t*t*(2.70158*t+1.70158)+1},swingFrom:function(t){return t*t*(2.70158*t-1.70158)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)},blink:function(t,e){return Math.round(t*(e||5))%2},pulse:function(t,e){return-Math.cos(t*((e||5)-.5)*2*Math.PI)/2+.5},wobble:function(t){return-Math.cos(t*Math.PI*(9*t))/2+.5},sinusoidal:function(t){return-Math.cos(t*Math.PI)/2+.5},flicker:function(t){t+=(Math.random()-.5)/5;return easings.sinusoidal(t<0?0:1<t?1:t)},mirror:function(t){return t<.5?easings.sinusoidal(2*t):easings.sinusoidal(1-2*(t-.5))},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},VCO.Animate=function(t,e){return new vcoanimate(t,e)},window.vcoanimate=function(){var a=document,e=window,t=e.performance,n=t&&(t.now||t.webkitNow||t.msNow||t.mozNow),p=n?function(){return n.call(t)}:function(){return+new Date},i=a.documentElement,s=!1,_=1e3,w=/^rgb\(|#/,o=/^([+\-])=([\d\.]+)/,O=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,r=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,h=/scale\(((?:[+\-]=)?([\d\.]+))\)/,l=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,c=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,d={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},b=function(){for(var t=a.createElement("a").style,e=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],i=0;i<e.length;i++)if(e[i]in t)return e[i]}(),x=void 0!==a.createElement("a").style.opacity,V=a.defaultView&&a.defaultView.getComputedStyle?function(t,e){e=T(e="transform"==e?b:e);var i=null,n=a.defaultView.getComputedStyle(t,"");return n&&(i=n[e]),t.style[e]||i}:i.currentStyle?function(e,t){if("opacity"==(t=T(t))){var i=100;try{i=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{i=e.filters("alpha").opacity}catch(t){}}return i/100}var n=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||n}:function(t,e){return t.style[T(e)]},f=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){e.setTimeout(function(){t(+new Date)},17)},g=[];function v(t){var e,i=g.length;for(n&&1e12<t&&(t=p()),s&&(t=p()),e=i;e--;)g[e](t);g.length&&f(v)}function y(t){var e,i=function(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e);for(i=0;i<t.length;++i)if(t[i]===e)return i}(g,t);0<=i&&(e=g.slice(i+1),g.length=i,g=g.concat(e))}function k(t,e){var i,n={};return(i=t.match(r))&&(n.rotate=I(i[1],e?e.rotate:null)),(i=t.match(h))&&(n.scale=I(i[1],e?e.scale:null)),(i=t.match(l))&&(n.skewx=I(i[1],e?e.skewx:null),n.skewy=I(i[3],e?e.skewy:null)),(i=t.match(c))&&(n.translatex=I(i[1],e?e.translatex:null),n.translatey=I(i[3],e?e.translatey:null)),n}function M(t){var e="";return"rotate"in t&&(e+="rotate("+t.rotate+"deg) "),"scale"in t&&(e+="scale("+t.scale+") "),"translatex"in t&&(e+="translate("+t.translatex+"px,"+t.translatey+"px) "),"skewx"in t&&(e+="skew("+t.skewx+"deg,"+t.skewy+"deg)"),e}function D(t){var e,i,n,a=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(a?(e=a[1],i=a[2],n=a[3],"#"+(1<<24|e<<16|i<<8|n).toString(16).slice(1)):t).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function T(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function E(t){return"function"==typeof t}function C(t){return Math.sin(t*Math.PI/2)}function S(t,n,a,s,o,r){s=E(s)?s:A.easings[s]||C;var h=t||_,l=this,c=r-o,d=p(),u=0,m=0;return 1===g.push(function t(e){var i=e-d;if(h<i||u)return r=isFinite(r)?r:1,u&&!m||n(r),y(t),a&&a.apply(l);isFinite(r)?n(c*s(i/h)+o):n(s(i/h))})&&f(v),{stop:function(t){u=1,(m=t)||(a=null)}}}function L(t,e){for(var i,n=t.length,a=[],s=0;s<n;++s)a[s]=[t[s][0],t[s][1]];for(i=1;i<n;++i)for(s=0;s<n-i;++s)a[s][0]=(1-e)*a[s][0]+e*a[parseInt(s+1,10)][0],a[s][1]=(1-e)*a[s][1]+e*a[parseInt(s+1,10)][1];return[a[0][0],a[0][1]]}function N(t,e,i,n,a,s,o){if("transform"!=a)return"string"==typeof i[s][a]?function(t,e,i){for(var n,a,s,o=[],r=0;r<6;r++)a=Math.min(15,parseInt(e.charAt(r),16)),s=Math.min(15,parseInt(i.charAt(r),16)),n=15<(n=Math.floor((s-a)*t+a))?15:n<0?0:n,o[r]=n.toString(16);return"#"+o.join("")}(t,i[s][a],n[s][a]):(o=Math.round(((n[s][a]-i[s][a])*t+i[s][a])*_)/_,a in d||(o+=e[s][a]||"px"),o);for(var r in o={},i[s][a])o[r]=r in n[s][a]?Math.round(((n[s][a][r]-i[s][a][r])*t+i[s][a][r])*_)/_:i[s][a][r];return o}function I(t,e,i,n,a){return(i=o.exec(t))?(a=parseFloat(i[2]))&&e+("+"==i[1]?1:-1)*a:parseFloat(t)}function A(t,a){var s,e,i,n,o,r,h=t?h=isFinite(t.length)?t:[t]:[],l=a.complete,c=a.duration,d=a.easing,u=a.bezier,m=[],p=[],_=[],f=[];for(u&&(e=a.left,i=a.top,delete a.right,delete a.bottom,delete a.left,delete a.top),s=h.length;s--;){for(var g in m[s]={},p[s]={},_[s]={},u&&(n=V(h[s],"left"),o=V(h[s],"top"),r=[I(E(e)?e(h[s]):e||0,parseFloat(n)),I(E(i)?i(h[s]):i||0,parseFloat(o))],f[s]=E(u)?u(h[s],r):u,f[s].push(r),f[s].unshift([parseInt(n,10),parseInt(o,10)])),a){switch(g){case"complete":case"duration":case"easing":case"bezier":continue}var v,y=V(h[s],g),C=E(a[g])?a[g](h[s]):a[g];"string"!=typeof C||!w.test(C)||w.test(y)?(m[s][g]="transform"==g?k(y):"string"==typeof C&&w.test(C)?D(y).slice(1):parseFloat(y),p[s][g]="transform"==g?k(C,m[s][g]):"string"==typeof C&&"#"==C.charAt(0)?D(C).slice(1):I(C,parseFloat(y)),"string"==typeof C&&(v=C.match(O))&&(_[s][g]=v[1])):delete a[g]}}return S.apply(h,[c,function(t,e,i){for(s=h.length;s--;)for(var n in u&&(i=L(f[s],t),h[s].style.left=i[0]+"px",h[s].style.top=i[1]+"px"),a)e=N(t,_,m,p,n,s),"transform"==n?h[s].style[b]=M(e):"opacity"!=n||x?h[s].style[T(n)]=e:h[s].style.filter="alpha(opacity="+100*e+")"},l,d])}return f(function(t){s=1e12<t!=1e12<p()}),A.tween=S,A.getStyle=V,A.bezier=L,A.transform=b,A.parseTransform=k,A.formatTransform=M,A.easings={},A}(),VCO.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},VCO.Point.prototype={add:function(t){return this.clone()._add(t)},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(t)},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t,e){return new VCO.Point(this.x/t,this.y/t,e)},multiplyBy:function(t){return new VCO.Point(this.x*t,this.y*t)},distanceTo:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},clone:function(){return new VCO.Point(this.x,this.y)},toString:function(){return"Point("+VCO.Util.formatNum(this.x)+", "+VCO.Util.formatNum(this.y)+")"}},VCO.DomMixins={show:function(t){t||(this._el.container.style.display="block")},hide:function(t){this._el.container.style.display="none"},addTo:function(t){t.appendChild(this._el.container),this.onAdd()},removeFrom:function(t){t.removeChild(this._el.container),this.onRemove()},animatePosition:function(t,e){var i={duration:this.options.duration,easing:this.options.ease};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]+"px");this.animator&&this.animator.stop(),this.animator=VCO.Animate(e,i)},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},setPosition:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e?e.style[i]=t[i]+"px":this._el.container.style[i]=t[i]+"px")},getPosition:function(){return VCO.Dom.getPosition(this._el.container)}},VCO.Dom={get:function(t){return"string"==typeof t?document.getElementById(t):t},getByClass:function(t){if(t)return document.getElementsByClassName(t)},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},createText:function(t,e){var i=document.createTextNode(t);return e&&e.appendChild(i),i},getTranslateString:function(t){return VCO.Dom.TRANSLATE_OPEN+t.x+"px,"+t.y+"px"+VCO.Dom.TRANSLATE_CLOSE},setPosition:function(t,e){t._vco_pos=e,VCO.Browser.webkit3d?(t.style[VCO.Dom.TRANSFORM]=VCO.Dom.getTranslateString(e),VCO.Browser.android&&(t.style["-webkit-perspective"]="1000",t.style["-webkit-backface-visibility"]="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}},VCO.Util.extend(VCO.Dom,{TRANSITION:VCO.Dom.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:VCO.Dom.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(VCO.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:VCO.Browser.webkit3d?",0)":")"}),VCO.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i,n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n&&"auto"!==n||(n=(i=document.defaultView.getComputedStyle(t,null))?i[e]:null),"auto"===n?null:n},getViewportOffset:function(t){var e=0,i=0,n=t,a=document.body;do{if(e+=n.offsetTop||0,i+=n.offsetLeft||0,n.offsetParent===a&&"absolute"===VCO.DomUtil.getStyle(n,"position"))break;n=n.offsetParent}while(n);n=t;do{if(n===a)break;e-=n.scrollTop||0,i-=n.scrollLeft||0,n=n.parentNode}while(n);return new VCO.Point(i,e)},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=VCO.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(t,e){return 0<t.className.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){VCO.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,i){t.className=t.className.replace(/(\S+)\s*/g,function(t,e){return e===i?"":t}).replace(/^\s+/,"")},setOpacity:function(t,e){VCO.Browser.ie?t.style.filter="alpha(opacity="+Math.round(100*e)+")":t.style.opacity=e},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){return VCO.DomUtil.TRANSLATE_OPEN+t.x+"px,"+t.y+"px"+VCO.DomUtil.TRANSLATE_CLOSE},getScaleString:function(t,e){return VCO.DomUtil.getTranslateString(e)+(" scale("+t+") ")+VCO.DomUtil.getTranslateString(e.multiplyBy(-1))},setPosition:function(t,e){t._vco_pos=e,VCO.Browser.webkit3d?(t.style[VCO.DomUtil.TRANSFORM]=VCO.DomUtil.getTranslateString(e),VCO.Browser.android&&(t.style["-webkit-perspective"]="1000",t.style["-webkit-backface-visibility"]="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._vco_pos}},VCO.DomEvent={addListener:function(e,t,i,n){var a,s,o,r=VCO.Util.stamp(i),h="_vco_"+t+r;e[h]||(o=function(t){return i.call(n||e,t||VCO.DomEvent._getEvent())},VCO.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener?this.addDoubleTapListener(e,o,r):"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(a=o,s="mouseenter"===t?"mouseover":"mouseout",o=function(t){if(VCO.DomEvent._checkMouse(e,t))return a(t)},e.addEventListener(s,o,!1)):e.addEventListener(t,o,!1):"attachEvent"in e&&e.attachEvent("on"+t,o),e[h]=o)},removeListener:function(t,e,i){var n=VCO.Util.stamp(i),a="_vco_"+e+n,s=t[a];s&&(VCO.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[a]=null)},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||window.Event!==t.constructor);)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){VCO.DomEvent.addListener(t,VCO.Draggable.START,VCO.DomEvent.stopPropagation),VCO.DomEvent.addListener(t,"click",VCO.DomEvent.stopPropagation),VCO.DomEvent.addListener(t,"dblclick",VCO.DomEvent.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){VCO.DomEvent.preventDefault(t),VCO.DomEvent.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},VCO.StyleSheet=VCO.Class.extend({includes:[VCO.Events],_el:{},initialize:function(){this.style=document.createElement("style"),this.style.appendChild(document.createTextNode("")),document.head.appendChild(this.style),this.sheet=this.style.sheet},addRule:function(t,e,i){var n=i?i:0;"insertRule"in this.sheet?this.sheet.insertRule(t+"{"+e+"}",n):"addRule"in this.sheet&&this.sheet.addRule(t,e,n)},onLoaded:function(t){this._state.loaded=!0,this.fire("loaded",this.data)}}),VCO.Date=VCO.Class.extend({initialize:function(t,e,i){"number"==typeof t?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),this._setFormat(e,i)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;(t=t||VCO.Language.fallback).constructor!=VCO.Language&&(trace("First argument to getDisplayDate must be VCO.Language"),t=VCO.Language.fallback);var i=e||this.data.format;return t.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw"Can't compare VCO.Dates on different scales";return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw"Can't compare VCO.Dates on different scales";return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),i=0;i<VCO.Date.SCALES.length;i++)if(VCO.Date.SCALES[i][2](e),VCO.Date.SCALES[i][0]==t)return new VCO.Date(e);throw"invalid scale "+t},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};VCO.Util.mergeData(t,this.data);var e=VCO.Date.DATE_PARTS;for(var i in e){var n=parseInt(t[e[i]]);isNaN(n)&&(n=4==i||5==i?1:0),t[e[i]]=n}return 0<t.month&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=VCO.Date.DATE_PARTS,i=0;i<e.length;i++)if(this.data[e[i]])return t?t in VCO.Date.BEST_DATEFORMATS||(t="short"):t="base",VCO.Date.BEST_DATEFORMATS[t][e[i]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))}}),VCO.Date.makeDate=function(t){var e=new VCO.Date(t);return isNaN(e.getTime())?new VCO.BigDate(t):e},VCO.BigYear=VCO.Class.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw"Invalid year "+t},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),function(r){r.SCALES=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",6e4,function(t){t.setSeconds(0)}],["hour",36e5,function(t){t.setMinutes(0)}],["day",864e5,function(t){t.setHours(0)}],["month",2592e6,function(t){t.setDate(1)}],["year",31536e6,function(t){t.setMonth(0)}],["decade",31536e7,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",31536e8,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",31536e9,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],r.DATE_PARTS=["millisecond","second","minute","hour","day","month","year"];var h=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,l=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;r.parseISODate=function(t){var e=new Date(t);if(isNaN(e))throw"Invalid date: "+t;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}},r.parseDate=function(t){if(t.match(h)){var e=t.match(h).slice(1),i={year:e[0].replace("+","")};return e[1]&&(i.month=e[1].replace("-","")),e[2]&&(i.day=e[2].replace("-","")),i}if(t.match(l))return r.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var n,a,s,o={};return t.match(/\d+\/\d+\/\d+/)&&(n=t.match(/\d+\/\d+\/\d+/)[0],t=VCO.Util.trim(t.replace(n,"")),a=n.split("/"),o.month=a[0],o.day=a[1],o.year=a[2]),t.match(/\d+\/\d+/)&&(n=t.match(/\d+\/\d+/)[0],t=VCO.Util.trim(t.replace(n,"")),a=n.split("/"),o.month=a[0],o.year=a[1]),t.match(":")&&(s=t.split(":"),o.hour=s[0],o.minute=s[1],s[2]&&(second_parts=s[2].split("."),o.second=second_parts[0],o.millisecond=second_parts[1])),o},r.BEST_DATEFORMATS={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}}}(VCO.Date),VCO.BigDate=VCO.Date.extend({initialize:function(t,e,i){VCO.BigYear==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),this._setFormat(e,i)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new VCO.BigYear(t.year)},floor:function(t){for(var e=0;e<VCO.BigDate.SCALES.length;e++)if(VCO.BigDate.SCALES[e][0]==t){var i=VCO.BigDate.SCALES[e][2](this.data.date_obj);return new VCO.BigDate(i)}throw"invalid scale "+t}}),function(){function t(i){return function(t){var e=t.getTime();return new VCO.BigYear(Math.floor(e/i)*i)}}VCO.BigDate.SCALES=[["age",1e6,new t(1e6)],["epoch",1e7,new t(1e7)],["era",1e8,new t(1e8)],["eon",1e9,new t(1e9)]]}(),VCO.DateUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},sortByDate:function(t,i){i=i||"start_date";t.sort(function(t,e){return t[i].isBefore(e[i])?-1:t[i].isAfter(e[i])?1:0})},parseTime:function(t){var e={hour:null,minute:null,second:null,millisecond:null},i=null,n=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);n&&(i=VCO.Util.trim(n[0]),t=VCO.Util.trim(t.substring(0,t.lastIndexOf(i))));var a=[],s=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(s?a=s.slice(1):1==(a=t.split(":")).length&&(a=t.split(".")),4<a.length)throw new Error("Invalid time: misuse of : or . as separator.");if(e.hour=parseInt(a[0]),i&&"p"==i.toLowerCase()[0]&&12!=e.hour?e.hour+=12:i&&"a"==i.toLowerCase()[0]&&12==e.hour&&(e.hour=0),isNaN(e.hour)||e.hour<0||23<e.hour)throw new Error("Invalid time (hour) "+e.hour);if(1<a.length&&(e.minute=parseInt(a[1]),isNaN(e.minute)))throw new Error("Invalid time (minute)");if(2<a.length){if(2<(a=a[2].split(/[\.,]/).concat(a.slice(3))).length)throw new Error("Invalid time (seconds and fractional seconds)");if(e.second=parseInt(a[0]),isNaN(e.second))throw new Error("Invalid time (second)");if(2==a.length){var o=parseInt(a[1]);if(isNaN(o))throw new Error("Invalid time (fractional seconds)");e.millisecond=100*o}}return e}},VCO.Draggable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(t,e,i){this._el={drag:t,move:t},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint},this.animator=null,this.dragevent=this.mousedrag,VCO.Browser.touch&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},VCO.Util.mergeData(this.options,e)},enable:function(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(t){this.options.constraint=t},_onDragStart:function(t){VCO.Browser.touch?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=VCO.Dom.getPosition(this._el.drag),this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(t){this.data.sliding=!1,VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()},_onDragMove:function(t){t.preventDefault(),this.data.sliding=!0,VCO.Browser.touch?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=VCO.Dom.getPosition(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)},_momentum:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i=!1;VCO.Browser.touch,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(i=!0),1e4<Math.abs(e.x)&&(this.data.direction="left",0<e.x&&(this.data.direction="right")),1e4<Math.abs(e.y)&&(this.data.direction="up",0<e.y&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)},_animateMomentum:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=VCO.Animate(this._el.move,e),this.fire("momentum",this.data)}}),VCO.Swipable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(t,e,i){this._el={drag:t,move:t},e&&(this._el.move=e),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint},this.animator=null,this.dragevent=this.mousedrag,VCO.Browser.touch&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},VCO.Util.mergeData(this.options,i)},enable:function(t){VCO.DomEvent.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(t){this.options.constraint=t},_onDragStart:function(t){this.animator&&this.animator.stop(),VCO.Browser.touch?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(t){this.data.sliding=!1,VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()},_onDragMove:function(t){var e={x:0,y:0};this.data.sliding=!0,VCO.Browser.touch?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)},_momentum:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i={x:!1,y:!1},n=!1;this.data.direction=null,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(n=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(i.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(i.y=!0),i.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(n=!0),1e4<Math.abs(e.x)&&(this.data.direction="left",0<e.x&&(this.data.direction="right"))),i.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(n=!0),1e4<Math.abs(e.y)&&(this.data.direction="up",0<e.y&&(this.data.direction="down"))),e.time<1e3||this._animateMomentum(),n&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=VCO.Animate(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:VCO.Ease.easeOutStrong}))},_animateMomentum:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),e.left=Math.floor(t.x)+"px"),this.animator=VCO.Animate(this._el.move,e),this.fire("momentum",this.data)}}),VCO.MenuBar=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={parent:{},container:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,this._el.container="object"==typeof t?t:VCO.Dom.get(t),e&&(this._el.parent=e),this.options={width:600,height:600,duration:1e3,ease:VCO.Ease.easeInOutQuint,menubar_default_y:0},this.animator={},VCO.Util.mergeData(this.options,i),this._initLayout(),this._initEvents()},show:function(t){this.options.duration},hide:function(t){},toogleZoomIn:function(t){this._el.button_zoomin.className=t?"vco-menubar-button":"vco-menubar-button vco-menubar-button-inactive",this._el.button_zoomout.className="vco-menubar-button"},toogleZoomOut:function(t){this._el.button_zoomout.className=t?"vco-menubar-button":"vco-menubar-button vco-menubar-button-inactive",this._el.button_zoomin.className="vco-menubar-button"},setSticky:function(t){this.options.menubar_default_y=t},setColor:function(t){this._el.container.className=t?"vco-menubar vco-menubar-inverted":"vco-menubar"},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)},_onButtonZoomIn:function(t){this.fire("zoom_in",t)},_onButtonZoomOut:function(t){this.fire("zoom_out",t)},_onButtonBackToStart:function(t){this.fire("back_to_start",t)},_initLayout:function(){this._el.button_zoomin=VCO.Dom.create("span","vco-menubar-button",this._el.container),this._el.button_zoomout=VCO.Dom.create("span","vco-menubar-button",this._el.container),this._el.button_backtostart=VCO.Dom.create("span","vco-menubar-button",this._el.container),VCO.Browser.mobile&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='vco-icon-goback'></span>",this._el.button_zoomin.innerHTML="<span class='vco-icon-zoom-in'></span>",this._el.button_zoomout.innerHTML="<span class='vco-icon-zoom-out'></span>"},_initEvents:function(){VCO.DomEvent.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),VCO.DomEvent.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),VCO.DomEvent.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}),VCO.Message=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins,VCO.I18NMixins],_el:{},initialize:function(t,e,i){this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"vco-message",message_icon_class:"vco-loading-icon"},VCO.Util.mergeData(this.data,t),VCO.Util.mergeData(this.options,e),this._el.container=VCO.Dom.create("div",this.options.message_class),i&&(i.appendChild(this._el.container),this._el.parent=i),this.animator={},this._initLayout(),this._initEvents()},updateMessage:function(t){this._updateMessage(t)},updateDisplay:function(t,e){this._updateDisplay(t,e)},_updateMessage:function(t){this._el.message.innerHTML=t||this._("loading")},_onMouseClick:function(){this.fire("clicked",this.options)},_initLayout:function(){this._el.message_container=VCO.Dom.create("div","vco-message-container",this._el.container),this._el.loading_icon=VCO.Dom.create("div",this.options.message_icon_class,this._el.message_container),this._el.message=VCO.Dom.create("div","vco-message-content",this._el.message_container),this._updateMessage()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)},_updateDisplay:function(t,e,i){}}),VCO.MediaType=function(t){for(var e=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.)?youtube|youtu.be",cls:VCO.Media.YouTube},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:VCO.Media.Vimeo},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?dailymotion.com",cls:VCO.Media.DailyMotion},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:VCO.Media.Vine},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:VCO.Media.SoundCloud},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:VCO.Media.Twitter},{type:"twitterembed",name:"TwitterEmbed",match_str:'<blockquote class="twitter-tweet"',cls:VCO.Media.TwitterEmbed},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:VCO.Media.GoogleMap},{type:"googleplus",name:"Google+",match_str:"^(https?:)?/*plus.google",cls:VCO.Media.GooglePlus},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:VCO.Media.Flickr},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:VCO.Media.Instagram},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:VCO.Media.Profile},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:VCO.Media.DocumentCloud},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif)(\?.*)?$/i,cls:VCO.Media.Image},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=sharing|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?/*drive.google.com/open?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:VCO.Media.GoogleDoc},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/*(www.)?wikipedia.org|^(https?:)?/*([a-z][a-z].)?wikipedia.org",cls:VCO.Media.Wikipedia},{type:"spotify",name:"spotify",match_str:"spotify",cls:VCO.Media.Spotify},{type:"iframe",name:"iFrame",match_str:"iframe",cls:VCO.Media.IFrame},{type:"storify",name:"Storify",match_str:"storify",cls:VCO.Media.Storify},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:VCO.Media.Blockquote},{type:"imageblank",name:"Imageblank",match_str:"",cls:VCO.Media.Image}],i=0;i<e.length;i++){if(t instanceof Array)return{type:"slider",cls:VCO.Media.Slider};if(t.url.match(e[i].match_str))return e[i]}return!1},VCO.Media=VCO.Class.extend({includes:[VCO.Events,VCO.I18NMixins],_el:{},initialize:function(t,e,i){this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"f2cc870b4d233dd0a5bfe73fd0d64ef0",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0},this.animator={},VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._el.container=VCO.Dom.create("div","vco-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout(),i&&(i.appendChild(this._el.container),this._el.parent=i)},loadMedia:function(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t._loadMedia(),t._state.loaded=!0,t._updateDisplay()},1200)}catch(t){trace("Error loading media for ",this._media),trace(t)}},loadingMessage:function(){this.message.updateMessage(this._("loading")+" "+this.options.media_name)},errorMessage:function(t){t=t?this._("error")+": "+t:this._("error"),this.message.updateMessage(t)},updateMediaDisplay:function(t){this._state.loaded&&(VCO.Browser.mobile?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",VCO.Browser.firefox&&(this._el.content_item.offsetWidth,this._el.content_item.offsetHeight),this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))},_loadMedia:function(){},_updateMediaDisplay:function(t){VCO.Browser.firefox&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")},_getMeta:function(){},show:function(){},hide:function(){},addTo:function(t){t.appendChild(this._el.container),this.onAdd()},removeFrom:function(t){t.removeChild(this._el.container),this.onRemove()},updateDisplay:function(t,e,i){this._updateDisplay(t,e,i)},stopMedia:function(){this._stopMedia()},loadErrorDisplay:function(t){try{this._el.content.removeChild(this._el.content_item)}catch(t){}this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='vco-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)},onLoaded:function(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.showMeta(),this.updateDisplay()},onMediaLoaded:function(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")},showMeta:function(t,e){this._state.show_meta=!0,this.data.credit&&""!=this.data.credit&&(this._el.credit=VCO.Dom.create("div","vco-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&""!=this.data.caption&&(this._el.caption=VCO.Dom.create("div","vco-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),this.data.caption&&this.data.credit||this.getMeta()},getMeta:function(){this._getMeta()},updateMeta:function(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=VCO.Dom.create("div","vco-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=VCO.Dom.create("div","vco-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){this.message=new VCO.Message({},this.options),this.message.addTo(this._el.container),this._el.content_container=VCO.Dom.create("div","vco-media-content-container",this._el.container),this.data.link&&""!=this.data.link?(this._el.link=VCO.Dom.create("a","vco-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&""!=this.data.link_target?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.content=VCO.Dom.create("div","vco-media-content",this._el.link)):this._el.content=VCO.Dom.create("div","vco-media-content",this._el.content_container)},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)},_stopMedia:function(){}}),VCO.Media.Blockquote=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-blockquote",this._el.content),this._el.content_container.className="vco-media-content-container vco-media-content-container-text",this.media_id=this.data.url,this._el.content_item.innerHTML=this.media_id,this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.DailyMotion=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-dailymotion",this._el.content),this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],t="http://www.dailymotion.com/embed/video/"+this.media_id,this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"}}),VCO.Media.DocumentCloud=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t=this;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-documentcloud vco-media-shadow",this._el.content),this._el.content_item.id=VCO.Util.unique_ID(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||trace("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),VCO.Load.js(["//s3.documentcloud.org/viewer/loader.js","//s3.amazonaws.com/s3.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})},_transformURL:function(t){return t.replace(/(.*)\.html$/,"$1.js")},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"},createMedia:function(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}),VCO.Media.Flickr=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.loadingMessage(),this._el.content_link=VCO.Dom.create("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-flickr vco-media-shadow",this._el.content_link),this._el.content_item.addEventListener("load",function(t){e.onMediaLoaded()}),this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",VCO.getJSON(t,function(t){"ok"==t.stat?e.createMedia(t):e.loadErrorDisplay("Photo not found or private.")})},establishMediaID:function(){var t="flickr.com/photos/",e=this.data.url.indexOf(t);if(-1==e)throw"Invalid Flickr URL";var i=e+t.length;this.media_id=this.data.url.substr(i).split("/")[1]},createMedia:function(t){trace(t);var e=this.sizes(this.options.height),i=t.sizes.size[t.sizes.size.length-2].source;self=this;for(var n=0;n<t.sizes.size.length;n++)t.sizes.size[n].label==e&&(i=t.sizes.size[n].source);this._el.content_item.src=i,this.onLoaded()},_getMeta:function(){var e=this,t="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?";VCO.getJSON(t,function(t){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank'>"+t.photo.owner.realname+"</a>",e.data.caption_alternate=t.photo.title._content+" "+t.photo.description._content,e.updateMeta()})},sizes:function(t){return t<=75?t<=0?"Large":"Thumbnail":t<=180?"Small":t<=240?"Small 320":t<=375?"Medium":t<=480?"Medium 640":"Large"}}),VCO.Media.GoogleDoc=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content),this.data.url.match("open?id=")?(this.media_id=this.data.url.split("open?id=")[1],this.data.url.match("&authuser=0")&&(t=this.media_id.match("&authuser=0")[0])):t=this.data.url.match(/file\/d\/([^/]*)\/?/)?"https://drive.google.com/file/d/"+this.data.url.match(/file\/d\/([^/]*)\/?/)[1]+"/preview":this.data.url,this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.GooglePlus=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-googleplus",this._el.content),this.media_id=this.data.url,t=this.media_id,this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.IFrame=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content),this.media_id=this.data.url,t=this.media_id,this._el.content_item.innerHTML=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.Image=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e=this,t="vco-media-item vco-media-image vco-media-shadow";this.loadingMessage(),this.data.url.match(/.png(\?.*)?$/)&&(t="vco-media-item vco-media-image"),this.data.link?(this._el.content_link=VCO.Dom.create("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_item=VCO.Dom.create("img",t,this._el.content_link)):this._el.content_item=VCO.Dom.create("img",t,this._el.content),this._el.content_item.addEventListener("load",function(t){e.onMediaLoaded()}),this._el.content_item.src=this._transformURL(this.data.url),this.onLoaded()},_transformURL:function(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")},_updateMediaDisplay:function(t){VCO.Browser.firefox&&(this._el.content_item.style.width="auto")}}),VCO.Media.Instagram=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e=this;this.loadingMessage(),this.media_id=this.data.url.split("/p/")[1].split("/")[0],this._el.content_link=VCO.Dom.create("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-instagram vco-media-shadow",this._el.content_link),this._el.content_item.addEventListener("load",function(t){e.onMediaLoaded()}),this._el.content_item.src="http://instagr.am/p/"+this.media_id+"/media/?size="+this.sizes(this._el.content.offsetWidth),this.media_id,this.onLoaded()},_getMeta:function(){var e=this,t="http://api.instagram.com/oembed?url=http://instagr.am/p/"+this.media_id+"&callback=?";VCO.getJSON(t,function(t){e.data.credit_alternate="<a href='"+t.author_url+"' target='_blank'>"+t.author_name+"</a>",e.data.caption_alternate=t.title,e.updateMeta()})},sizes:function(t){return t<=150?"t":t<=306?"m":"l"}}),VCO.Media.GoogleMap=VCO.Media.extend({includes:[VCO.Events],_API_KEY:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",_loadMedia:function(){this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-map vco-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=VCO.Dom.create("iframe","",this._el.content_item),(window.stash=this).mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()},_updateMediaDisplay:function(){var t;this._state.loaded&&(t=VCO.Util.ratio.square({w:this._el.content_item.offsetWidth}),this._el.content_item.style.height=t.h+"px")},makeGoogleMapsEmbedURL:function(t,o){var r=!1;var h,l={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},e=/(https:\/\/.+google.+?\/maps)/,i=/@([-\d.]+),([-\d.]+)/,n=/([\w\W]+)/,a=/,((?:[-\d.]+[zmayht],?)*)/,c={view:new RegExp(e.source+"/"+i.source+a.source),place:new RegExp(e.source+"/place/"+n.source+"/"+i.source+a.source),directions:new RegExp(e.source+"/dir/"+n.source+"/"+n.source+"/"+i.source+a.source),search:new RegExp(e.source+"/search/"+n.source+"/"+i.source+a.source)};return mapmode="view",(h=t).match(c.place)?mapmode="place":h.match(c.directions)?mapmode="directions":h.match(c.search)&&(mapmode="search"),function(t,e){var i={},n=e[1],a=e[e.length-1];for(param in l[t]){var s=parseInt(param)+2;"center"==l[t][param]?i[l[t][param]]=e[s]+","+e[++s]:i[l[t][param]]=e[s]}return(i=function(t,e){if("z"==t.slice(-1))e.zoom=t;else if("m"==t.slice(-1))e.zoom=14,e.maptype="satellite";else if("t"==t.slice(-1)){var i;for(param in r=!0,"place"==mapmode?i=h.match(c.place)[3]+","+h.match(c.place)[4]:(i=e.center,delete e.center),(e={}).location=i,streetview_params=t.split(","),l.streetview){var n=parseInt(param)+1;"pitch"==l.streetview[param]&&"90t"==streetview_params[n]?e[l.streetview[param]]=0:e[l.streetview[param]]=streetview_params[n].slice(0,-1)}}return e}(a,i)).key=o,1==r&&(t="streetview"),n+"/embed/v1/"+t+VCO.Util.getParamString(i)}(mapmode,h.match(c[mapmode]))}}),VCO.Media.Profile=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.loadingMessage(),this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-profile vco-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()},_updateMediaDisplay:function(t){VCO.Browser.firefox&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}),VCO.Media.Slider=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}}),VCO.Media.SoundCloud=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-soundcloud vco-media-shadow",this._el.content),this.media_id=this.data.url,t="http://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",VCO.getJSON(t,function(t){e.createMedia(t)})},createMedia:function(t){this._el.content_item.innerHTML=t.html,this.onLoaded()}}),VCO.Media.Spotify=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-spotify",this._el.content),this.data.url.match("open.spotify.com/track/")?this.media_id="spotify:track:"+this.data.url.split("open.spotify.com/track/")[1]:this.data.url.match("spotify:track:")?this.media_id=this.data.url:this.data.url.match("/playlist/")?(e=this.data.url.split("open.spotify.com/user/")[1].split("/playlist/")[0],this.media_id="spotify:user:"+e+":playlist:"+this.data.url.split("/playlist/")[1]):this.data.url.match(":playlist:")&&(this.media_id=this.data.url),t="http://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=VCO.Dom.create("iframe","vco-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()},_updateMediaDisplay:function(t){var e=this.options.height,i=0,n=0,e=VCO.Browser.mobile?this.options.height/2:this.options.height-this.options.credit_height-this.options.caption_height-30;this._el.content_item.style.maxHeight="none",trace(e),trace(this.options.width),n=e>this.options.width?(trace("height is greater"),i=this.options.width+80+"px",this.options.width+"px"):(trace("width is greater"),trace(this.options.width),i=e+"px",e-80+"px"),this.player.style.width=n,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=n),this._el.caption&&(this._el.caption.style.width=n)},_stopMedia:function(){}}),VCO.Media.Storify=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-storify",this._el.content),this.media_id=this.data.url,t="<iframe frameborder='0' width='100%' height='100%' src='"+this.media_id+"/embed'></iframe>",t+="<script src='"+this.media_id+".js'><\/script>",this._el.content_item.innerHTML=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.Text=VCO.Class.extend({includes:[VCO.Events],_el:{container:{},content_container:{},content:{},headline:{},date:{}},data:{unique_id:"",headline:"headline",text:"text"},options:{title:!1},initialize:function(t,e,i){VCO.Util.setData(this,t),VCO.Util.mergeData(this.options,e),this._el.container=VCO.Dom.create("div","vco-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)},show:function(){},hide:function(){},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},headlineHeight:function(){return this._el.headline.offsetHeight+40},addDateText:function(t){this._el.date.innerHTML=t},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){var t,e;this._el.content_container=VCO.Dom.create("div","vco-text-content-container",this._el.container),this._el.date=VCO.Dom.create("h3","vco-headline-date",this._el.content_container),""!=this.data.headline&&(t="vco-headline",this.options.title&&(t="vco-headline vco-headline-title"),this._el.headline=VCO.Dom.create("h2",t,this._el.content_container),this._el.headline.innerHTML=this.data.headline),""!=this.data.text&&(e="",e+=VCO.Util.htmlify(VCO.Util.linkify(this.data.text)),this._el.content=VCO.Dom.create("div","vco-text-content",this._el.content_container),this._el.content.innerHTML=e),this.onLoaded()}}),VCO.Media.Twitter=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,n=this;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-twitter",this._el.content),this._el.content_container.className="vco-media-content-container vco-media-content-container-text",this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="",t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",VCO.ajax({type:"GET",url:t,dataType:"json",success:function(t){n.createMedia(t)},error:function(t,e){var i="";i+="Unable to load Tweet. <br/>"+n.media_id+"<br/>"+e,n.loadErrorDisplay(i)}})},createMedia:function(t){var e="",i="",n="",i=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",a=t.author_url.split("twitter.com/")[1],s=(n=t.html.split("</p>&mdash;")[1].split('<a href="')[1]).split('">')[0],o=n.split('">')[1].split("</a>")[0];e+=i=i.replace(/<a href/gi,'<a class="vco-makelink" target="_blank" href'),e+="<div class='vcard'>",e+="<a href='"+s+"' class='twitter-date' target='_blank'>"+o+"</a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='vco-icon-twitter'></span></span>",e+="<span class='nickname'>@"+a+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.Vimeo=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vimeo vco-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",this.player=VCO.Dom.create("iframe","",this._el.content_item),this.player.addEventListener("load",function(t){e.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"},_stopMedia:function(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){trace(t)}}}),VCO.Media.Vine=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vine vco-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()},_updateMediaDisplay:function(){var t=VCO.Util.ratio.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}}),VCO.Media.Website=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e=this;this.loadingMessage(),this.media_id=this.data.url.replace(/.*?:\/\//g,""),this.options.api_key_embedly?(api_url="http://api.embed.ly/1/extract?key="+this.options.api_key_embedly+"&url="+this.media_id+"&callback=?",VCO.getJSON(api_url,function(t){e.createMedia(t)})):this.createCardContent()},createCardContent:function(){var t,e,i,n,a;t=window,e=document,a="embedly-platform",e.getElementById(a)||(t.embedly=t.embedly||function(){(t.embedly.q=t.embedly.q||[]).push(arguments)},(i=e.createElement("script")).id=a,i.async=1,i.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js",(n=e.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n));var s='<a href="'+this.data.url+'" class="embedly-card">'+this.data.url+"</a>";this._setContent(s)},createMedia:function(t){var e="";e+="<h4><a href='"+this.data.url+"' target='_blank'>"+t.title+"</a></h4>",t.images&&t.images[0]&&(trace(t.images[0].url),e+="<img src='"+t.images[0].url+"' />"),t.favicon_url&&(e+="<img class='vco-media-website-icon' src='"+t.favicon_url+"' />"),e+="<span class='vco-media-website-description'>"+t.provider_name+"</span><br/>",e+="<p>"+t.description+"</p>",this._setContent(e)},_setContent:function(t){this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-website",this._el.content),this._el.content_container.className="vco-media-content-container vco-media-content-container-text",this._el.content_item.innerHTML=t,this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.Wikipedia=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,n=this;this.loadingMessage(),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-wikipedia",this._el.content),this._el.content_container.className="vco-media-content-container vco-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),t="http://"+this.data.url.split("//")[1].split(".wikipedia")[0]+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",VCO.ajax({type:"GET",url:t,dataType:"json",success:function(t){n.createMedia(t)},error:function(t,e){var i="";i+="Unable to load Wikipedia entry. <br/>"+n.media_id+"<br/>"+e,n.loadErrorDisplay(i)}})},createMedia:function(t){var e="";if(t.query){var i="";(e={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]}).entry=VCO.Util.getObjectAttributeByIndex(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.page_image=e.entry.thumbnail,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var n=0;n<e.text_array.length;n++)n+1<=e.paragraphs&&n+1<e.text_array.length&&(e.text+="<p>"+e.text_array[n+1]);i+="<span class='vco-icon-wikipedia'></span>",i+="<div class='vco-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank'>"+e.title+"</a></h4>",i+="<span class='vco-wikipedia-source'>"+this._("wikipedia")+"</span></div>",e.page_image,i+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.YouTube=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.loadingMessage(),this.youtube_loaded=!1,this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-youtube vco-media-shadow",this._el.content),this._el.content_item.id=VCO.Util.unique_ID(7),t=VCO.Util.getUrlVars(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=t.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:trace("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.media_id.start=VCO.Util.parseYouTubeTime(t.t),this.media_id.hd=Boolean(void 0!==t.hd),VCO.Load.js("https://www.youtube.com/player_api",function(){e.createMedia()})},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"},_stopMedia:function(){if(this.youtube_loaded)try{this.player.pauseVideo()}catch(t){trace(t)}},createMedia:function(){var t=this;clearTimeout(this.timer),"undefined"!=typeof YT&&void 0!==YT.Player?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",autohide:1,showinfo:0,theme:"light",start:this.media_id.start,fs:0,rel:0},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createPlayer()},1e3)},onPlayerReady:function(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()},onStateChange:function(t){}}),VCO.Slide=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins,VCO.I18NMixins],_el:{},initialize:function(t,e,i){this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null},this.options={duration:1e3,slide_padding_lr:40,ease:VCO.Ease.easeInSpline,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._initLayout(),this._initEvents()},show:function(){this.animator=VCO.Animate(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})},hide:function(){},setActive:function(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this.loadMedia()):this.stopMedia()},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},updateDisplay:function(t,e,i){this._updateDisplay(t,e,i)},loadMedia:function(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)},stopMedia:function(){this._media&&this._state.loaded&&this._media.stopMedia()},getBackground:function(){return this.has.background},scrollToTop:function(){this._el.container.scrollTop=0},getFormattedDate:function(){if(0<VCO.Util.trim(this.data.display_date).length)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t},_initLayout:function(){this._el.container=VCO.Dom.create("div","vco-slide"),this.has.title&&(this._el.container.className="vco-slide vco-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=VCO.Dom.create("div","vco-slide-scrollable-container",this._el.container),this._el.content_container=VCO.Dom.create("div","vco-slide-content-container",this._el.scroll_container),this._el.content=VCO.Dom.create("div","vco-slide-content",this._el.content_container),this._el.background=VCO.Dom.create("div","vco-slide-background",this._el.container),this.data.background&&(this.data.background.url&&(this.has.background.image=!0,this._el.container.className+=" vco-full-image-background",this.has.background.color_value="#000",this._el.background.style.backgroundImage="url('"+this.data.background.url+"')",this._el.background.style.display="block"),this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" vco-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" vco-text-background")),this.data.media&&this.data.media.url&&""!=this.data.media.url&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=VCO.MediaType(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this._media=new this.data.media.mediatype.cls(this.data.media,this.options)),(this.has.text||this.has.headline)&&(this._text=new VCO.Media.Text(this.data.text,{title:this.has.title,language:this.options.language}),this._text.addDateText(this.getFormattedDate())),this.has.text||this.has.headline||!this.has.media?this.has.headline&&this.has.media&&!this.has.text?(this._el.container.className+=" vco-slide-media-only",this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._media.addTo(this._el.content),this._text.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.className+=" vco-slide-text-only",this._text.addTo(this._el.content)):(this._el.container.className+=" vco-slide-media-only",this._media.addTo(this._el.content)),this.onLoaded()},_initEvents:function(){},_updateDisplay:function(t,e,i){var n,a=this.options.slide_padding_lr,s=this.options.slide_padding_lr;this.options.width=t||this._el.container.offsetWidth,n=this.options.width-2*this.options.slide_padding_lr,VCO.Browser.mobile&&this.options.width<=this.options.skinny_size?(s=a=0,n=this.options.width):"landscape"==i||this.options.width<=this.options.skinny_size&&(s=a=50,n=this.options.width-a-s),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=s+"px",this._el.content.style.width=n+"px",this.options.height=e||this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(n,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline||this.options.width<=this.options.skinny_size?this._media.updateDisplay(n,this.options.height,i):this._media.updateDisplay(n/2,this.options.height,i))}}),VCO.SlideNav=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._el.container=VCO.Dom.create("div","vco-slidenav-"+this.options.direction),VCO.Browser.mobile&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)},update:function(t){var e={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),this._update(e)},setColor:function(t){this._el.content_container.className=t?"vco-slidenav-content-container vco-slidenav-inverted":"vco-slidenav-content-container"},_onMouseClick:function(){this.fire("clicked",this.options)},_update:function(t){this.data=VCO.Util.mergeData(this.data,t),this._el.title.innerHTML=VCO.Util.unlinkify(this.data.title),this._el.description.innerHTML=VCO.Util.unlinkify(this.data.date)},_initLayout:function(){this._el.content_container=VCO.Dom.create("div","vco-slidenav-content-container",this._el.container),this._el.icon=VCO.Dom.create("div","vco-slidenav-icon",this._el.content_container),this._el.title=VCO.Dom.create("div","vco-slidenav-title",this._el.content_container),this._el.description=VCO.Dom.create("div","vco-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)}}),VCO.StorySlider=VCO.Class.extend({includes:VCO.Events,initialize:function(t,e,i,n){this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:256,g:256,b:256},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0},"object"==typeof t?(this._el.container=t,this.options.id=VCO.Util.unique_ID(6,"vco")):(this.options.id=t,this._el.container=VCO.Dom.get(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,VCO.Util.mergeData(this.options,i),VCO.Util.mergeData(this.data,e),n&&this.init()},init:function(){this._initLayout(),this._initEvents(),this._initData(),this._updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()},_addSlide:function(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)},_createSlide:function(t,e,i){var n=new VCO.Slide(t,this.options,e);this._addSlide(n),i<0?this._slides.push(n):this._slides.splice(i,0,n)},_createSlides:function(t){for(var e=0;e<t.length;e++)""==t[e].unique_id&&(t[e].unique_id=VCO.Util.unique_ID(6,"vco-slide")),this._createSlide(t[e],!1,-1)},_removeSlide:function(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)},_destroySlide:function(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)},_findSlideIndex:function(t){var e=t;return("string"==typeof t||t instanceof String)&&(e=VCO.Util.findArrayNumberByUniqueID(t,this._slides,"unique_id")),e},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)},createSlide:function(t,e){this._createSlide(t,!1,e)},createSlides:function(t){this._createSlides(t)},destroySlide:function(t){this._destroySlide(t)},destroySlideId:function(t){this.destroySlide(this._findSlideIndex(t))},goTo:function(t,e,i){var n=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);t<this._slides.length&&0<=t&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-this.slide_spacing*t+"px",this._onSlideChange(i)):this.animator=VCO.Animate(this._el.slider_container,{left:-this.slide_spacing*t+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){n.preloadSlides(t)},this.options.duration))},goToId:function(t,e,i){this.goTo(this._findSlideIndex(t),e,i)},preloadSlides:function(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())},next:function(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)},previous:function(){var t=this._findSlideIndex(this.current_id);0<=t-1?this.goTo(t-1):this.goTo(t)},showNav:function(t,e){this.options.width<=500&&VCO.Browser.mobile||(e?t.show():t.hide())},changeBackground:function(t){var e={r:256,g:256,b:256};this.options.slide_default_fade;t.color_value?(e=VCO.Util.hexToRgb(t.color_value))||(trace("Invalid color value "+t.color_value),e=this.options.default_bg_color):e=this.options.default_bg_color,e.r,e.g,e.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",e.r<255&&e.g<255&&e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))},_updateDisplay:function(t,e,i,n){var a,s=void 0===n?this.options.layout:n;this.options.layout=s,this.slide_spacing=2*this.options.width,this.options.width=t||this._el.container.offsetWidth,this.options.height=e||this._el.container.offsetHeight,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var o=0;o<this._slides.length;o++)this._slides[o].updateDisplay(this.options.width,this.options.height,s),this._slides[o].setPosition({left:this.slide_spacing*o,top:0});this.goToId(this.current_id,!0,!0)},_updateDrawSlides:function(){for(var t=this.options.layout,e=0;e<this._slides.length;e++)this._slides[e].updateDisplay(this.options.width,this.options.height,t),this._slides[e].setPosition({left:this.slide_spacing*e,top:0});this.goToId(this.current_id,!0,!1)},_initLayout:function(){this._el.container.className+=" vco-storyslider",this._el.slider_container_mask=VCO.Dom.create("div","vco-slider-container-mask",this._el.container),this._el.background=VCO.Dom.create("div","vco-slider-background vco-animate",this._el.container),this._el.slider_container=VCO.Dom.create("div","vco-slider-container vcoanimate",this._el.slider_container_mask),this._el.slider_item_container=VCO.Dom.create("div","vco-slider-item-container",this._el.slider_container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._nav.previous=new VCO.SlideNav({title:"Previous",description:"description"},{direction:"previous"}),this._nav.next=new VCO.SlideNav({title:"Next",description:"description"},{direction:"next"}),this._nav.next.addTo(this._el.container),this._nav.previous.addTo(this._el.container),this._el.slider_container.style.left="0px",VCO.Browser.touch&&(this._swipable=new VCO.Swipable(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new VCO.Message({},{message_class:"vco-message-full",message_icon_class:"vco-icon-swipe-left"}),this._message.updateMessage("Swipe to Navigate<br><span class='vco-button'>OK</span>"),this._message.addTo(this._el.container))},_initEvents:function(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))},_initData:function(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)},_onBackgroundChange:function(t){var e=this._findSlideIndex(this.current_id),i=this._slides[e].getBackground();this.changeBackground(t),this.fire("colorchange",i)},_onMessageClick:function(t){this._message.hide()},_onSwipeNoDirection:function(t){this.goToId(this.current_id)},_onNavigation:function(t){"next"==t.direction||"left"==t.direction?this.next():"previous"!=t.direction&&"right"!=t.direction||this.previous(),this.fire("nav_"+t.direction,this.data)},_onSlideAdded:function(t){trace("slideadded"),this.fire("slideAdded",this.data)},_onSlideRemoved:function(t){this.fire("slideRemoved",this.data)},_onSlideChange:function(t){t||this.fire("change",{unique_id:this.current_id})},_onMouseClick:function(t){},_fireMouseEvent:function(t){var e;this._loaded&&(e="mouseenter"===(e=t.type)?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)&&("contextmenu"===e&&VCO.DomEvent.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"})))},_onLoaded:function(){this.fire("loaded",this.data)}}),VCO.TimeNav=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i,n){this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{},attribution:{}},this.collapsed=!1,this._el.container="object"==typeof t?t:VCO.Dom.get(t),this.data={},this.options={width:600,height:600,duration:1e3,ease:VCO.Ease.easeInOutQuint,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this._markers=[],this._groups=[],this._calculated_row_height=100,this.current_id="",this.timescale={},this.timeaxis={},this.axishelper={},this.max_rows=6,this.animate_css=!1,this._swipable,VCO.Util.mergeData(this.options,i),VCO.Util.mergeData(this.data,e),n&&this.init()},init:function(){this._initLayout(),this._initEvents(),this._initData(),this._updateDisplay(),this._onLoaded()},positionMarkers:function(){this._positionMarkers()},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)},_getTimeScale:function(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch(t){trace("Invalid value for marker_height_min option."),e=30}return 0==e&&(trace("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new VCO.TimeScale(this.data,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})},_updateTimeScale:function(t){this.options.scale_factor=t,this._updateDrawTimeline()},zoomIn:function(){var t=VCO.Util.findNextGreater(this.options.zoom_sequence,this.options.scale_factor);t==this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),this.setZoomFactor(t)},zoomOut:function(){var t=VCO.Util.findNextLesser(this.options.zoom_sequence,this.options.scale_factor);t==this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),this.setZoomFactor(t)},setZoom:function(t){var e=this.options.zoom_sequence[t];"number"==typeof e?this.setZoomFactor(e):console.log("Invalid zoom level. Please use a number between 0 and "+(this.options.zoom_sequence.length-1))},setZoomFactor:function(t){this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)},_createGroups:function(){var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var e=0;e<t.length;e++)this._createGroup(t[e])}},_createGroup:function(t){var e=new VCO.TimeGroup(t);this._addGroup(e),this._groups.push(e)},_addGroup:function(t){t.addTo(this._el.container)},_positionGroups:function(){if(this.options.has_groups)for(var t=this.options.height-this._el.timeaxis_background.offsetHeight,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding),i=(this.timescale.getGroupLabels(),0),n=0;i<this._groups.length;i++){var a=Math.floor(n*(e+this.options.marker_padding));this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(VCO.Util.isEven(i)),n+=this._groups[i].data.rows}},_addMarker:function(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)},_createMarker:function(t,e){var i=new VCO.TimeMarker(t,this.options);this._addMarker(i),e<0?this._markers.push(i):this._markers.splice(e,0,i)},_createMarkers:function(t){for(var e=0;e<t.length;e++)this._createMarker(t[e],-1)},_removeMarker:function(t){t.removeFrom(this._el.marker_item_container)},_destroyMarker:function(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)},_positionMarkers:function(t){for(var e=0;e<this._markers.length;e++){var i=this.timescale.getPositionInfo(e);t?this._markers[e].setClass("vco-timemarker vco-timemarker-fast"):this._markers[e].setClass("vco-timemarker"),this._markers[e].setPosition({left:i.start}),this._markers[e].setWidth(i.width)}},_assignRowsToMarkers:function(){var t=this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this._calculated_row_height=Math.floor(t/this.timescale.getNumberOfRows());for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(e);var n=this.timescale.getPositionInfo(i).row,a=Math.floor(n*(e+this.options.marker_padding))+this.options.marker_padding,s=t-a+this.options.marker_padding;this._markers[i].setRowPosition(a,s)}},_resetMarkersActive:function(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)},_findMarkerIndex:function(t){var e=-1;return("string"==typeof t||t instanceof String)&&(e=VCO.Util.findArrayNumberByUniqueID(t,this._markers,"unique_id",e)),e},createMarker:function(t,e){this._createMarker(t,e)},createMarkers:function(t){this._createMarkers(t)},destroyMarker:function(t){this._destroyMarker(t)},destroyMarkerId:function(t){this.destroyMarker(this._findMarkerIndex(t))},goTo:function(t,e,i){var n=this.options.ease,a=this.options.duration,s=t<0?0:t;this._resetMarkersActive(),0<=t&&t<this._markers.length&&this._markers[t].setActive(!0),this.animator&&this.animator.stop(),e?(this._el.slider.className="vco-timenav-slider",this._el.slider.style.left=-this._markers[s].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="vco-timenav-slider vco-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[s].getLeft()+this.options.width/2+"px"):(this._el.slider.className="vco-timenav-slider",this.animator=VCO.Animate(this._el.slider,{left:-this._markers[s].getLeft()+this.options.width/2+"px",duration:a,easing:n})),0<=t&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id=""},goToId:function(t,e,i){this.goTo(this._findMarkerIndex(t),e,i)},_onLoaded:function(){this.fire("loaded",this.data)},_onMarkerAdded:function(t){this.fire("dateAdded",this.data)},_onMarkerRemoved:function(t){this.fire("dateRemoved",this.data)},_onMarkerClick:function(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})},_onMouseScroll:function(t){var e=0,i=0,n={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};(t=t||window.event).originalEvent&&(t=t.originalEvent),void 0!==t.wheelDeltaX&&(e=t.wheelDeltaY/6,e=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?t.wheelDeltaX/6:0),e&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+e,n.left<i?i=n.left:i<n.right&&(i=n.right),this.animate_css&&(this._el.slider.className="vco-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"},_onDragMove:function(t){this.animate_css&&(this._el.slider.className="vco-timenav-slider",this.animate_css=!1)},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&e!=this.options.height&&(this.options.height=e,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-this.options.width/2+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),this.goToId(this.current_id,!0)},_drawTimeline:function(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this._positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups()},_updateDrawTimeline:function(t){var e,i=!1;return t?(e=new VCO.TimeScale(this.data,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows}),this.timescale.getMajorScale()==e.getMajorScale()&&this.timescale.getMinorScale()==e.getMinorScale()&&(i=!0)):i=!0,i?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this._positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this._updateDisplay()):this._drawTimeline(!0),i},_initLayout:function(){this._el.attribution=VCO.Dom.create("div","vco-attribution",this._el.container),this._el.line=VCO.Dom.create("div","vco-timenav-line",this._el.container),this._el.slider=VCO.Dom.create("div","vco-timenav-slider",this._el.container),this._el.slider_background=VCO.Dom.create("div","vco-timenav-slider-background",this._el.slider),this._el.marker_container_mask=VCO.Dom.create("div","vco-timenav-container-mask",this._el.slider),this._el.marker_container=VCO.Dom.create("div","vco-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=VCO.Dom.create("div","vco-timenav-item-container",this._el.marker_container),this._el.timeaxis=VCO.Dom.create("div","vco-timeaxis",this._el.slider),this._el.timeaxis_background=VCO.Dom.create("div","vco-timeaxis-background",this._el.container),this._el.attribution.innerHTML="<a href='http://timeline.knightlab.com' target='_blank'><span class='vco-knightlab-logo'></span>Timeline JS</a>",this.timeaxis=new VCO.TimeAxis(this._el.timeaxis,this.options),this._swipable=new VCO.Swipable(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()},_initEvents:function(){this._swipable.on("dragmove",this._onDragMove,this),VCO.DomEvent.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),VCO.DomEvent.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this)},_initData:function(){this._createMarkers(this.data.events),this._drawTimeline()}}),VCO.TimeMarker=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:VCO.Ease.easeInSpline,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._initLayout(),this._initEvents()},show:function(){},hide:function(){},setActive:function(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="vco-timemarker vco-timemarker-with-end vco-timemarker-active":this.active?this._el.container.className="vco-timemarker vco-timemarker-active":this.has_end_date?this._el.container.className="vco-timemarker vco-timemarker-with-end":this._el.container.className="vco-timemarker"},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},updateDisplay:function(t,e){this._updateDisplay(t,e)},loadMedia:function(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)},stopMedia:function(){this._media&&this._state.loaded&&this._media.stopMedia()},getLeft:function(){return this._el.container.style.left.slice(0,-2)},getTime:function(){return this.data.start_date.getTime()},getEndTime:function(){return!!this.data.end_date&&this.data.end_date.getTime()},setHeight:function(t){var e=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",this._el.content.className=t<=30?"vco-timemarker-content vco-timemarker-content-small":"vco-timemarker-content",t<=56?VCO.DomUtil.addClass(this._el.content_container,"vco-timemarker-content-container-small"):VCO.DomUtil.removeClass(this._el.content_container,"vco-timemarker-content-container-small"),VCO.Browser.webkit?((e=Math.floor(t/14))<1&&(e=1),this._text.className="vco-headline",this._text.style.webkitLineClamp=e):(e=t/12,this._text.className=1<e?"vco-headline vco-headline-fadeout":"vco-headline",this._text.style.height=12*e+"px")},setWidth:function(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="vco-timemarker-content-container vco-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="vco-timemarker-content-container"))},setClass:function(t){this._el.container.className=t},setRowPosition:function(t,e){this.setPosition({top:t}),this._el.timespan.style.height=e+"px"},_onMarkerClick:function(t){this.fire("markerclick",{unique_id:this.data.unique_id})},_initLayout:function(){var t;this._el.container=VCO.Dom.create("div","vco-timemarker"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="vco-timemarker vco-timemarker-with-end"),this._el.timespan=VCO.Dom.create("div","vco-timemarker-timespan",this._el.container),this._el.timespan_content=VCO.Dom.create("div","vco-timemarker-timespan-content",this._el.timespan),this._el.content_container=VCO.Dom.create("div","vco-timemarker-content-container",this._el.container),this._el.content=VCO.Dom.create("div","vco-timemarker-content",this._el.content_container),this._el.line_left=VCO.Dom.create("div","vco-timemarker-line-left",this._el.timespan),this._el.line_right=VCO.Dom.create("div","vco-timemarker-line-right",this._el.timespan),this.data.media&&(this._el.media_container=VCO.Dom.create("div","vco-timemarker-media-container",this._el.content),this.data.media.thumbnail&&""!=this.data.media.thumbnail?(this._el.media=VCO.Dom.create("img","vco-timemarker-media",this._el.media_container),this._el.media.src=this.data.media.thumbnail):(t=VCO.MediaType(this.data.media).type,this._el.media=VCO.Dom.create("span","vco-icon-"+t,this._el.media_container))),this._el.text=VCO.Dom.create("div","vco-timemarker-text",this._el.content),this._text=VCO.Dom.create("h2","vco-headline",this._el.text),this.data.text.headline&&""!=this.data.text.headline?this._text.innerHTML=VCO.Util.unlinkify(this.data.text.headline):this.data.text.text&&""!=this.data.text.text?this._text.innerHTML=VCO.Util.unlinkify(this.data.text.text):this.data.media.caption&&""!=this.data.media.caption&&(this._text.innerHTML=VCO.Util.unlinkify(this.data.media.caption)),this.onLoaded()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMarkerClick,this)},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}),VCO.TimeGroup=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=VCO.Dom.create("div","vco-timegroup"),VCO.Util.mergeData(this.data,t),this.animator={},this._initLayout(),this._initEvents()},updateDisplay:function(t,e){},setRowPosition:function(t,e){this.options.height=e*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"},setAlternateRowColor:function(t){this._el.container.className=t?"vco-timegroup vco-timegroup-alternate":"vco-timegroup"},_onMouseClick:function(){this.fire("clicked",this.options)},_initLayout:function(){this._el.message=VCO.Dom.create("div","vco-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)},_updateDisplay:function(t,e,i){}}),VCO.TimeScale=VCO.Class.extend({initialize:function(t,e){var i=(t=VCO.Util.extend({scale:"human"},t)).events;if(this._scale=t.scale,e=VCO.Util.extend({display_width:500,screen_multiplier:3,max_rows:null},e),this._display_width=e.display_width,this._screen_multiplier=e.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=i[0].start_date.getTime(),this._latest=i[i.length-1].start_date.getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<0)throw new Error("earliest event time is before latest. Events should be sorted.");0==this._span_in_millis&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=VCO.AxisHelper.getBestHelper(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,e.max_rows)},_computeDefaultSpan:function(t){if("human"!=t.scale)return 2e5;for(var e={},i=0;i<t.events.length;i++){var n=t.events[i].start_date.findBestFormat();e[n]=e[n]?e[n]+1:1}for(i=VCO.Date.SCALES.length-1;0<=i;i--)if(e.hasOwnProperty(VCO.Date.SCALES[i][0])){var a=VCO.Date.SCALES[VCO.Date.SCALES.length-1];return VCO.Date.SCALES[i+1]&&(a=VCO.Date.SCALES[i+1]),a[1]}return 31536e6},getGroupLabels:function(){return this._group_labels||[]},getScale:function(){return this._scale},getNumberOfRows:function(){return this._number_of_rows},getPixelWidth:function(){return this._pixel_width},getPosition:function(t){return(t-this._earliest)*this._pixels_per_milli},getPositionInfo:function(t){return this._positions[t]},getPixelsPerTick:function(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)},getTicks:function(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}},getDateFromTime:function(t){if("human"==this._scale)return new VCO.Date(t);if("cosmological"==this._scale)return new VCO.BigDate(new VCO.BigYear(t));throw"Don't know how to get date from time for "+this._scale},getMajorScale:function(){return this._axis_helper.major.name},getMinorScale:function(){return this._axis_helper.minor.name},_assessGroups:function(t){for(var e=[],i=!1,n=0;n<t.length;n++)t[n].group&&(e.indexOf(t[n].group)<0?e.push(t[n].group):i=!0);return e.length&&i&&e.push(""),e},_computeRowInfo:function(t,e){for(var i=[],n=0,a=0;a<t.length;a++){var s=t[a],o=[];delete s.row;for(var r,h,l=0;l<i.length;l++)if(o.push(i[l].end-s.start),o[l]<=0){i[s.row=l]=s;break}void 0===s.row&&(null===e?(s.row=i.length,i.push(s)):0<e?(s.row=i.length,i.push(s),e--):(r=Math.min.apply(null,o),h=o.indexOf(r),s.row=h,s.end>i[h].end&&(i[h]=s),n++))}return{n_rows:i.length,n_overlaps:n}},_computePositionInfo:function(t,e,i){i=i||100;for(var n=[],a=!1,s=0;s<t.length;s++){var o,r={start:this.getPosition(t[s].start_date.getTime())};this._positions.push(r),void 0!==t[s].end_date?(o=this.getPosition(t[s].end_date.getTime()),r.width=o-r.start,r.width>i?r.end=r.start+r.width:r.end=r.start+i):(r.width=i,r.end=r.start+i),t[s].group?n.indexOf(t[s].group)<0&&n.push(t[s].group):a=!0}if(n.length){a&&n.push("");for(var h=[],s=0;s<n.length;s++)h[s]={label:n[s],idx:s,positions:[],n_rows:1,n_overlaps:0};for(s=0;s<this._positions.length;s++){(r=this._positions[s]).group=n.indexOf(t[s].group||""),r.row=0;for(var l=(u=h[r.group]).positions.length-1;0<=l;l--)u.positions[l].end>r.start&&u.n_overlaps++;u.positions.push(r)}for(var c=n.length;;){var d=Math.max(0,e-c);if(!d)break;if(h.sort(function(t,e){return t.n_overlaps>e.n_overlaps?-1:t.n_overlaps<e.n_overlaps?1:t.idx-e.idx}),!h[0].n_overlaps)break;for(var u,m,c=0,s=0;s<h.length;s++){(u=h[s]).n_overlaps&&d&&(m=this._computeRowInfo(u.positions,u.n_rows+1),u.n_rows=m.n_rows,u.n_overlaps=m.n_overlaps,d--),c+=u.n_rows}}this._number_of_rows=c,this._group_labels=[],h.sort(function(t,e){return t.idx-e.idx});for(var s=0,p=0;s<h.length;s++){this._group_labels.push({label:h[s].label,rows:h[s].n_rows});for(l=0;l<h[s].positions.length;l++){(r=h[s].positions[l]).row+=p}p+=h[s].n_rows}}else{var _=this._computeRowInfo(this._positions,e);this._number_of_rows=_.n_rows}}}),VCO.TimeAxis=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins,VCO.I18NMixins],_el:{},initialize:function(t,e){this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:VCO.Ease.easeInSpline,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],this.dateformat_lookup={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"},this._el.container="object"==typeof t?t:VCO.Dom.get(t),VCO.Util.mergeData(this.options,e),this._initLayout(),this._initEvents()},show:function(){},hide:function(){},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},updateDisplay:function(t,e){this._updateDisplay(t,e)},getLeft:function(){return this._el.container.style.left.slice(0,-2)},drawTicks:function(t,e){var i=t.getTicks();this._el.minor,this.dateformat_lookup[i.minor.name],i.minor.ticks,this.minor_ticks,this._el.major,this.dateformat_lookup[i.major.name],i.major.ticks,this.major_ticks;this._el.major.className="vco-timeaxis-major",this._el.minor.className="vco-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,this.dateformat_lookup[i.major.name]),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,this.dateformat_lookup[i.minor.name],i.major.ticks),this.positionTicks(t,e,!0),this._el.major.className="vco-timeaxis-major vco-animate-opacity vco-timeaxis-animate-opacity",this._el.minor.className="vco-timeaxis-minor vco-animate-opacity vco-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1},_createTickElements:function(t,e,i,n){e.innerHTML="";var a={};if(n)for(idx in n)a[n[idx].getTime()]=!0;for(var s=[],o=0;o<t.length;o++){var r,h,l=t[o];l.getTime()in a||(r=VCO.Dom.create("div","vco-timeaxis-tick",e),(h=VCO.Dom.create("span","vco-timeaxis-tick-text vco-animate-opacity",r)).innerHTML=l.getDisplayDate(this.getLanguage(),i),s.push({tick:r,tick_text:h,display_date:l.getDisplayDate(this.getLanguage(),i),date:l}))}return s},positionTicks:function(t,e,i){i?(this._el.major.className="vco-timeaxis-major",this._el.minor.className="vco-timeaxis-minor"):(this._el.major.className="vco-timeaxis-major vco-timeaxis-animate",this._el.minor.className="vco-timeaxis-minor vco-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,e),this._positionTickArray(this.minor_ticks,t,e)},_positionTickArray:function(t,e,i){if(t[1]&&t[0]){var n=1;e.getPosition(t[1].date.getMillisecond())-e.getPosition(t[0].date.getMillisecond())<i&&(n=Math.round(i/e.getPixelsPerTick()));for(var a=1,s=0;s<t.length;s++){var o=t[s];o.tick.style.left=e.getPosition(o.date.getMillisecond())+"px",o.tick_text.innerHTML=o.display_date,1<n?n<=a?(a=1,o.tick_text.style.opacity=1,o.tick.className="vco-timeaxis-tick"):(a++,o.tick_text.style.opacity=0,o.tick.className="vco-timeaxis-tick vco-timeaxis-tick-hidden"):(o.tick_text.style.opacity=1,o.tick.className="vco-timeaxis-tick")}}},_initLayout:function(){this._el.content_container=VCO.Dom.create("div","vco-timeaxis-content-container",this._el.container),this._el.major=VCO.Dom.create("div","vco-timeaxis-major",this._el.content_container),this._el.minor=VCO.Dom.create("div","vco-timeaxis-minor",this._el.content_container),this.onLoaded()},_initEvents:function(){},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}),VCO.AxisHelper=VCO.Class.extend({initialize:function(t){if(!t)throw"Axis helper must be configured with options";this.scale=t.scale,this.minor=t.minor,this.major=t.major},getPixelsPerTick:function(t){return t*this.minor.factor},getMajorTicks:function(t){return this._getTicks(t,this.major)},getMinorTicks:function(t){return this._getTicks(t,this.minor)},_getTicks:function(t,e){for(var i=t._scaled_padding*e.factor,n=t._earliest-i,a=t._latest+i,s=[],o=n;o<a;o+=e.factor)s.push(t.getDateFromTime(o).floor(e.name));return{name:e.name,ticks:s}}}),function(s){function t(t,e){h[t]=[];for(var i=0;i<e.length-1;i++){var n=e[i],a=e[i+1];h[t].push(new s({scale:n[3],minor:{name:n[0],factor:n[1]},major:{name:a[0],factor:a[1]}}))}}var h={};t("human",VCO.Date.SCALES),t("cosmological",VCO.BigDate.SCALES),s.HELPERS=h,s.getBestHelper=function(t,e){"number"!=typeof e&&(e=100);var i=t.getScale(),n=h[i];if(!n)throw"No AxisHelper available for "+i;var a=null;for(var s in n){var o=n[s],r=o.getPixelsPerTick(t._pixels_per_milli);if(e<r)return null==a?o:Math.abs(e-r)<Math.abs(e-r)?o:a;a=o}return n[n.length-1]}}(VCO.AxisHelper),VCO.Timeline=VCO.Class.extend({includes:[VCO.Events,VCO.I18NMixins],initialize:function(t,e,i){var n=this;this.version="0.0.20",this.ready=!1,this._el={container:{},storyslider:{},timenav:{},menubar:{}},this._el.container="object"==typeof t?t:VCO.Dom.get(t),this._storyslider={},this._style_sheet=new VCO.StyleSheet,this._timenav={},this.message=new VCO.Message({},{message_class:"vco-message-full"}),this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"vco-timeline",timenav_height:175,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,relative_date:!1,use_bc:!1,duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"]},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,VCO.Util.mergeData(this.options,i),window.addEventListener("resize",function(t){n.updateDisplay()}),this._el.container.className+=" vco-timeline",this.options.is_embed&&(this._el.container.className+=" vco-timeline-embed"),this.options.is_full_embed&&(this._el.container.className+=" vco-timeline-full-embed"),this.message.addTo(this._el.container),!this.options.relative_date||"undefined"!=typeof moment?n._loadLanguage(e):VCO.Load.js(this.options.script_path+"/library/moment.js",function(){n._loadLanguage(e),trace("LOAD MOMENTJS")})},_loadLanguage:function(t){this.options.language=new VCO.Language(this.options),this._initData(t)},goToId:function(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))},goTo:function(t){this.config.title?0==t?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)},goToStart:function(){this.goTo(0)},goToEnd:function(){var t=this.config.events.length-1;this.goTo(this.config.title?1+t:t)},goToPrev:function(){this.goTo(this._getSlideIndex(this.current_id)-1)},goToNext:function(){this.goTo(this._getSlideIndex(this.current_id)+1)},add:function(t){var e=this.config.addEvent(t),i=this._getEventIndex(e),n=this.config.events[i];this._storyslider.createSlide(n,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(n,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:e})},remove:function(t){var e;0<=t&&t<this.config.events.length&&(this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1)),e=this.config.events.splice(t,1),this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:e[0].unique_id}))},removeId:function(t){this.remove(this._getEventIndex(t))},getData:function(t){if(this.config.title){if(0==t)return this.config.title;if(0<t&&t<=this.config.events.length)return this.config.events[t-1]}else if(0<=t&&t<this.config.events.length)return this.config.events[t];return null},getDataById:function(t){return this.getData(this._getSlideIndex(t))},getSlide:function(t){return 0<=t&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null},getSlideById:function(t){return this.getSlide(this._getSlideIndex(t))},getCurrentSlide:function(){return this.getSlideById(this.current_id)},updateDisplay:function(){this.ready&&this._updateDisplay()},_calculateTimeNavHeight:function(t,e){var i=0;return t?i=t:(this.options.timenav_height_percentage||e)&&(i=e?Math.round(this.options.height/100*e):Math.round(this.options.height/100*this.options.timenav_height_percentage)),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i-=2*this.options.marker_padding},_updateDisplay:function(t,e,i){var n=this.options.duration,a=this.options.base_class,s=0;i&&(n=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" vco-skinny",this.options.layout="portrait"):(this.options.width<=this.options.medium_size&&(a+=" vco-medium"),this.options.layout="landscape"),VCO.Browser.touch&&(this.options.layout=VCO.Browser.orientation()),VCO.Browser.mobile?(a+=" vco-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),"portrait"==this.options.layout?a+=" vco-layout-portrait":a+=" vco-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,s="top"==this.options.timenav_position?Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-19.5:Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-17.5),e?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=VCO.Animate(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:n/2,easing:VCO.Ease.easeOutStrong}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=VCO.Animate(this._el.menubar,{top:s+"px",duration:n/2,easing:VCO.Ease.easeOutStrong})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=s+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout),this._el.container.className=a},_updateHashBookmark:function(t){window.location.hash="#event-"+t.toString(),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)},_initData:function(t){var e=this;"string"==typeof t?(e=this,VCO.ConfigFactory.makeConfig(t,function(t){e.setConfig(t)})):VCO.TimelineConfig==t.constructor?this.setConfig(t):this.setConfig(new VCO.TimelineConfig(t))},setConfig:function(t){this.config=t,this.config.validate(),this.config.isValid()?this._onDataLoaded():this.showMessage("<strong>"+this._("error")+":</strong> "+this.config.getErrors(";"))},_initLayout:function(){this._el.container.innerHTML="","top"==this.options.timenav_position?(this._el.timenav=VCO.Dom.create("div","vco-timenav",this._el.container),this._el.storyslider=VCO.Dom.create("div","vco-storyslider",this._el.container)):(this._el.storyslider=VCO.Dom.create("div","vco-storyslider",this._el.container),this._el.timenav=VCO.Dom.create("div","vco-timenav",this._el.container)),this._el.menubar=VCO.Dom.create("div","vco-menubar",this._el.container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.storyslider.style.top="1px",this.options.timenav_height=this._calculateTimeNavHeight(),this._timenav=new VCO.TimeNav(this._el.timenav,this.config,this.options),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this._storyslider=new VCO.StorySlider(this._el.storyslider,this.config,this.options),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new VCO.MenuBar(this._el.menubar,this._el.container,this.options),"portrait"==this.options.layout?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(!1,!0,2e3)},_initEvents:function(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("back_to_start",this._onBackToStart,this)},_initGoogleAnalytics:function(){var t,e,i,n,a;t=window,e=document,i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=+new Date,n=e.createElement("script"),a=e.getElementsByTagName("script")[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(n,a),ga("create",this.options.ga_property_id,"auto")},_initAnalytics:function(){if(null!==this.options.ga_property_id){this._initGoogleAnalytics(),ga("send","pageview");var t=this.options.track_events;for(i=0;i<t.length;i++){var e=t[i];this.addEventListener(e,function(t){ga("send","event",t.type,"clicked")})}}},_onZoomToggle:function(t){"in"==t.zoom?this._menubar.toogleZoomIn(t.show):"out"==t.zoom&&this._menubar.toogleZoomOut(t.show)},_getEventIndex:function(t){for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return e;return-1},_getSlideIndex:function(t){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return this.config.title?e+1:e;return-1},_onDataLoaded:function(t){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide(),this.ready=!0},showMessage:function(t){this.message?this.message.updateMessage(t):(trace("No message display available."),trace(t))},_onColorChange:function(t){this.fire("color_change",{unique_id:this.current_id},this),t.color||t.image},_onSlideChange:function(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))},_onTimeNavChange:function(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))},_onChange:function(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this._updateHashBookmark(this.current_id)},_onBackToStart:function(t){this._storyslider.goTo(0),this.fire("back_to_start",{unique_id:this.current_id},this)},zoomIn:function(){this._timenav.zoomIn()},zoomOut:function(){this._timenav.zoomOut()},setZoom:function(t){this._timenav.setZoom(t)},_onZoomIn:function(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)},_onZoomOut:function(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)},_onTimeNavLoaded:function(){this._loaded.timenav=!0,this._onLoaded()},_onStorySliderLoaded:function(){this._loaded.storyslider=!0,this._onLoaded()},_onStorySliderNext:function(t){this.fire("nav_next",t)},_onStorySliderPrevious:function(t){this.fire("nav_previous",t)},_onLoaded:function(){this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),this.options.hash_bookmark&&""!=window.location.hash?this.goToId(window.location.hash.replace("#event-","")):("true"==this.options.start_at_end||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.current_id=this._timenav.current_id,this.options.hash_bookmark&&this._updateHashBookmark(this.current_id)))}}),VCO.Timeline.source_path=function(){var t=document.getElementsByTagName("script"),e=t[t.length-1].src;return e.substr(0,e.lastIndexOf("/"))}();